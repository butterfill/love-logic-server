/*

 lodash 3.10.1 (Custom Build) <https://lodash.com/>
 Build: `lodash modern -d -o ./index.js`
 Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 Available under MIT license <https://lodash.com/license>
*/
(function e$$0(y,b,v){function p(e,w){if(!b[e]){if(!y[e]){var u="function"==typeof require&&require;if(!w&&u)return u(e,!0);if(z)return z(e,!0);u=Error("Cannot find module '"+e+"'");throw u.code="MODULE_NOT_FOUND",u;}u=b[e]={exports:{}};y[e][0].call(u.exports,function(w){var u=y[e][1][w];return p(u?u:w)},u,u.exports,e$$0,y,b,v)}return b[e].exports}for(var z="function"==typeof require&&require,e=0;e<v.length;e++)p(v[e]);return p})({1:[function(f,y,b){},{}],2:[function(f,y,b){(function(f){function p(e,
u){for(var q=0,f=e.length-1;0<=f;f--){var B=e[f];"."===B?e.splice(f,1):".."===B?(e.splice(f,1),q++):q&&(e.splice(f,1),q--)}if(u)for(;q--;q)e.unshift("..");return e}function z(e,u){if(e.filter)return e.filter(u);for(var f=[],b=0;b<e.length;b++)u(e[b],b,e)&&f.push(e[b]);return f}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;b.resolve=function(){for(var e="",u=!1,q=arguments.length-1;-1<=q&&!u;q--){var b=0<=q?arguments[q]:f.cwd();if("string"!==typeof b)throw new TypeError("Arguments to path.resolve must be strings");
b&&(e=b+"/"+e,u="/"===b.charAt(0))}e=p(z(e.split("/"),function(e){return!!e}),!u).join("/");return(u?"/":"")+e||"."};b.normalize=function(e){var f=b.isAbsolute(e),q="/"===D(e,-1);(e=p(z(e.split("/"),function(e){return!!e}),!f).join("/"))||f||(e=".");e&&q&&(e+="/");return(f?"/":"")+e};b.isAbsolute=function(e){return"/"===e.charAt(0)};b.join=function(){var e=Array.prototype.slice.call(arguments,0);return b.normalize(z(e,function(e,f){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");
return e}).join("/"))};b.relative=function(e,f){function q(m){for(var e=0;e<m.length&&""===m[e];e++);for(var c=m.length-1;0<=c&&""===m[c];c--);return e>c?[]:m.slice(e,c-e+1)}e=b.resolve(e).substr(1);f=b.resolve(f).substr(1);for(var A=q(e.split("/")),B=q(f.split("/")),G=Math.min(A.length,B.length),x=G,t=0;t<G;t++)if(A[t]!==B[t]){x=t;break}G=[];for(t=x;t<A.length;t++)G.push("..");G=G.concat(B.slice(x));return G.join("/")};b.sep="/";b.delimiter=":";b.dirname=function(f){var b=e.exec(f).slice(1);f=b[0];
b=b[1];if(!f&&!b)return".";b&&(b=b.substr(0,b.length-1));return f+b};b.basename=function(f,b){var q=e.exec(f).slice(1)[2];b&&q.substr(-1*b.length)===b&&(q=q.substr(0,q.length-b.length));return q};b.extname=function(f){return e.exec(f).slice(1)[3]};var D="b"==="ab".substr(-1)?function(e,f,b){return e.substr(f,b)}:function(e,f,b){0>f&&(f=e.length+f);return e.substr(f,b)}}).call(this,f("_process"))},{_process:3}],3:[function(f,y,b){function v(){w=!1;u.length?D=u.concat(D):q=-1;D.length&&p()}function p(){if(!w){var e=
setTimeout(v);w=!0;for(var f=D.length;f;){u=D;for(D=[];++q<f;)u&&u[q].run();q=-1;f=D.length}u=null;w=!1;clearTimeout(e)}}function z(e,f){this.fun=e;this.array=f}function e(){}f=y.exports={};var D=[],w=!1,u,q=-1;f.nextTick=function(e){var f=Array(arguments.length-1);if(1<arguments.length)for(var b=1;b<arguments.length;b++)f[b-1]=arguments[b];D.push(new z(e,f));1!==D.length||w||setTimeout(p,0)};z.prototype.run=function(){this.fun.apply(null,this.array)};f.title="browser";f.browser=!0;f.env={};f.argv=
[];f.version="";f.versions={};f.on=e;f.addListener=e;f.once=e;f.off=e;f.removeListener=e;f.removeAllListeners=e;f.emit=e;f.binding=function(e){throw Error("process.binding is not supported");};f.cwd=function(){return"/"};f.chdir=function(e){throw Error("process.chdir is not supported");};f.umask=function(){return 0}},{}],4:[function(f,y,b){y="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};b=f("../fol");f=f("../proofs/proof");y.fol=b;y.proof=
f},{"../fol":6,"../proofs/proof":19}],5:[function(f,y,b){var v,p,z;p=f("lodash");z=f("./parser/awFOL");v=function(e,f){this.world=f;p.isString(e)?this.sentence=z.parse(e):this.sentence=e;this.varStack={};return this};v.prototype.logSentence=function(){return console.log("sentence "+JSON.stringify(this.sentence,null,4))};v.prototype.evaluate=function(e){var f,b,u,q,A;e=null!=e?e:this.sentence;if("value"===e.type)return e.value;if("and"===e.type)return this.evaluate(e.left)&&this.evaluate(e.right);
if("nand"===e.type)return!(this.evaluate(e.left)&&this.evaluate(e.right));if("or"===e.type)return this.evaluate(e.left)||this.evaluate(e.right);if("nor"===e.type)return!(this.evaluate(e.left)||this.evaluate(e.right));if("not"===e.type)return!this.evaluate(e.left);if("arrow"===e.type)return!this.evaluate(e.left)||this.evaluate(e.right);if("double_arrow"===e.type)return this.evaluate(e.left)===this.evaluate(e.right);if("sentence_letter"===e.type)return this.world[e.letter];if("predicate"===e.type||
"identity"===e.type)return b=e,f="identity"===b.type?function(){var e,f,b,t;b=this.world.domain;t=[];e=0;for(f=b.length;e<f;e++)A=b[e],t.push([A,A]);return t}.call(this):this.world.predicates[b.name],b=this.instantiate_terms(b.termlist),f=p.where(f,b),0<f.length;if("existential_quantifier"===e.type||"universal_quantifier"===e.type)return f=e.boundVariable,q=f.name,q in this.varStack||(this.varStack[q]=[]),u=this,"existential_quantifier"===e.type&&(b=p.some),"universal_quantifier"===e.type&&(b=p.all),
b(this.world.domain,function(f){u.varStack[q].push(f);f=u.evaluate(e.left);u.varStack[q].pop();return f});throw Error("e (evaluate inner) could not evaluate sentence "+JSON.stringify(e,null,4));};v.prototype.instantiate_terms=function(e){var f,b,u,q;u=[];f=0;for(b=e.length;f<b;f++)if(q=e[f],"name"===q.type){if(!(q.name in this.world.names))throw Error("The name "+q.name+" is not defined in this world.");u.push(this.world.names[q.name])}else if("variable"===q.type){if(!(q.name in this.varStack))throw Error("The variable "+
q.name+" is not bound by any quantifier.");u.push(p.last(this.varStack[q.name]))}else throw Error("Encountered a term of unknown type: "+JSON.stringify(q,null,4));return u};b.evaluate=function(e,f){return(new v(e,f)).evaluate()}},{"./parser/awFOL":10,lodash:8}],6:[function(f,y,b){var v,p,z,e,D,w,u,q;v=f("lodash");z=f("./parser/awFOL");q=f("./util");D=f("./match");u=f("./substitute");w=f("./normal_form");e=f("./evaluate");b.parse=function(e){e=z.parse(e);return p(e)};p=function(f){q.walk(f,function(b){if(null!==
b&&!(v.isArray(b)||v.isString(b)||v.isBoolean(b)||v.isNumber(b)))return b.walk=function(e){q.walk(b,e);return b},b.delExtraneousProperties=function(){return q.delExtraneousProperties(b)},b.isIdenticalTo=function(e){return q.areIdenticalExpressions(b,e)},b.clone=function(){var e;e=q.cloneExpression(b);p(e);return e},b.toString=function(e){return q.expressionToString(b,e)},b.listMetaVariableNames=function(){return q.listMetaVariableNames(b)},b.findMatches=function(e,f,t){e=D.find(b,e,f,t);p(e);return e},
b.applyMatches=function(e){e=D.apply(b,e);p(e);return e},b.applySubstitutions=function(){var e;e=u.applySubstitutions(b);p(e);return e},b.containsSubstitutions=function(){var e;e=!1;b.walk(function(b){null!=(null!=b?b.substitutions:void 0)&&(e=!0)});return e},b.getNames=function(){var e;e=[];b.walk(function(b){"name"===(null!=b?b.type:void 0)&&e.push(b.name)});return e},b.getPredicates=function(){var e;e=[];b.walk(function(b){"predicate"===(null!=b?b.type:void 0)&&e.push({name:b.name,arity:b.termlist.length})});
return v.uniq(e,function(e){return e.name+"*&!"+e.arity})},b.getSentenceLetters=function(){var e;e=[];b.walk(function(b){"sentence_letter"===(null!=b?b.type:void 0)&&e.push(b.letter)});return e.sort()},b.getFreeVariableNames=function(){var e,x,t,m;e=q.listTerms(b);x=v.uniq(function(){var b,c,a;a=[];b=0;for(c=e.length;b<c;b++)t=e[b],"variable"===t.type&&a.push(t.name);return a}());return function(){var e,c,a;a=[];e=0;for(c=x.length;e<c;e++)m=x[e],w.isVariableFree(m,f)&&a.push(m);return a}()},b.convertToPNFsimplifyAndSort=
function(){var e;e=w.convertToPNFsimplifyAndSort(f);p(e);return e},b.isPNFExpressionEquivalent=function(e){return w.arePNFExpressionsEquivalent(b,e)},b.evaluate=function(f){return e.evaluate(b,f)}});return f};b._decorate=p},{"./evaluate":5,"./match":7,"./normal_form":9,"./parser/awFOL":10,"./substitute":21,"./util":22,lodash:8}],7:[function(f,y,b){var v,p,z,e,D,w,u,q,A,B,G,x,t,m,r=[].indexOf||function(c){for(var a=0,h=this.length;a<h;a++)if(a in this&&this[a]===c)return a;return-1};v=f("lodash");
m=f("./util");b.find=function(c,a,h){null==h&&(h={});null==h&&(h={});return x(a,function(a){var e,b;a=t(c,a,h);if(!1!==a){for(e in a)b=a[e],a[e]=m.cloneExpression(b);return a}})||!1};t=function(c,a,h){var e;null==h&&(h={});e=function(a,c){var n,b;if(null!=(null!=c?c.type:void 0)&&("expression_variable"===(n=c.type)||"term_metavariable"===n)){"expression_variable"===c.type&&(b=c.letter);"term_metavariable"===c.type&&(b=c.name);if(b in h)return m.areIdenticalExpressions(a,h[b]);h=v.clone(h);h[b]=a;
return null!=c.box?null==a.box?!1:m.walkCompare(a.box,c.box,e):h}};return m.walkCompare(c,a,e)?h:!1};b.findWithoutApplyingSubs=t;x=function(c,a){var h;if(!m.expressionContainsSubstitutions(c))return a(c);h=m.cloneExpression(c);h=A(h);return w(h,a)};b.doAfterApplyingSubstitutions=x;w=function(c,a){var h,e,b,t,n,f;h=D(c);if(b=!m.expressionContainsSubstitutions(h))if(f=a(h))return f;t=G(c);n=!m.expressionContainsSubstitutions(t);e=!m.areIdenticalExpressions(h,t);if(n&&e&&(f=a(t))||!b&&(f=w(h,a))||!n&&
e&&(f=w(t,a)))return f};D=function(c){var a;a=m.cloneExpression(c);return m.walkMutateFindOne(a,function(c){var e,b;if(null!=(null!=c?c.substitutions:void 0)){c=m.cloneExpression(c);b=B(c);if(null==b)return{newExpression:a,aResult:void 0};u(c,b)&&(e=m.cloneExpression(b.to),null!=c.substitutions&&(e.substitutions=c.substitutions),null!=c.box&&(e.box=c.box),c=e);return{newExpression:c,aResult:b}}}).mutatedExpression};u=function(c,a){return c.type!==a.from.type?!1:null!=c.name&&null!=a.from.name&&c.name===
a.from.name||null!=c.letter&&null!=a.from.letter&&c.letter===a.from.letter?!0:!1};G=function(c){c=m.cloneExpression(c);return m.walkMutateFindOne(c,function(a){var c;if(null!=(null!=a?a.substitutions:void 0))return a=m.cloneExpression(a),c=B(a),{newExpression:a,aResult:c}}).mutatedExpression};A=function(c){c=m.cloneExpression(c);return m.walkMutate(c,function(a){var c;if(null==(null!=a?a.substitutions:void 0)||null!=(null!=a?a.type:void 0)&&("name"===(c=a.type)||"variable"===c||"term_metavariable"===
c))return a;for(c=B(a);c;)a=q(c)?z(a,c):p(a,c),c=B(a);return a})};b._moveAllSubsInwards=A;B=function(c){var a;if(null!=c.substitutions){for(a=c.substitutions.shift();0<c.substitutions.length&&m.areIdenticalExpressions(a.from,a.to);)a=c.substitutions.shift();if(m.areIdenticalExpressions(a.from,a.to))delete c.substitutions;else return 0===c.substitutions.length&&delete c.substitutions,a}};q=function(c){var a;return(a=c.from.type,0<=r.call(m.termTypes,a))?!0:!1};z=function(c,a){return e(c,a,m.termTypes)};
b._addSubToEveryTerm=z;p=function(c,a){return e(c,a,["sentence_letter","expression_variable"])};b._addSubToEverySentence=p;e=function(c,a,h){var e,b;b=function(a){var c;if(null==(null!=a?a.type:void 0)||!(c=a.type,0<=r.call(h,c))||b._inSub)return a;a.substitutions&&!m.expressionHasSub(a,e)?a.substitutions.push(e):a.substitutions=[e];return a};c=m.cloneExpression(c);e=m.cloneExpression(a);return c=m.walkMutate(c,b)};b.apply=function(c,a,h){var e;null==h&&(h={});e=function(c){var h,e;if(null==(null!=
c?c.type:void 0)||"expression_variable"!==(h=c.type)&&"term_metavariable"!==h)return c;"expression_variable"===c.type&&(e=c.letter);"term_metavariable"===c.type&&(e=c.name);if(!(e in a))return c;h=m.cloneExpression(a[e]);null!=c.substitutions&&(h.substitutions=c.substitutions);null!=c.box&&(h.box=c.box);return h};if(h.noClone)return m.walkMutate(c,e);c=m.cloneExpression(c);return m.walkMutate(c,e)}},{"./util":22,lodash:8}],8:[function(f,y,b){(function(f){(function(){function p(a,c){if(a!==c){var h=
null===a,e=a===n,l=a===a,b=null===c,f=c===n,m=c===c;if(a>c&&!b||!l||h&&!f&&m||e&&m)return 1;if(a<c&&!h||!m||b&&!e&&l||f&&l)return-1}return 0}function z(a,c,h){for(var e=a.length,l=h?e:-1;h?l--:++l<e;)if(c(a[l],l,a))return l;return-1}function e(a,c,h){if(c!==c)return m(a,h);--h;for(var e=a.length;++h<e;)if(a[h]===c)return h;return-1}function D(a){return"function"==typeof a||!1}function w(a){return null==a?"":a+""}function u(a,c){for(var h=-1,e=a.length;++h<e&&-1<c.indexOf(a.charAt(h)););return h}function q(a,
c){for(var h=a.length;h--&&-1<c.indexOf(a.charAt(h)););return h}function A(a,c){return p(a.criteria,c.criteria)||a.index-c.index}function B(a){return va[a]}function G(a){return Ka[a]}function x(a,c,h){c?a=tb[a]:h&&(a=La[a]);return"\\"+a}function t(a){return"\\"+La[a]}function m(a,c,h){var e=a.length;for(c+=h?0:-1;h?c--:++c<e;){var l=a[c];if(l!==l)return c}return-1}function r(a){return!!a&&"object"==typeof a}function c(a){return 160>=a&&9<=a&&13>=a||32==a||160==a||5760==a||6158==a||8192<=a&&(8202>=
a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function a(a,c){for(var h=-1,e=a.length,l=-1,b=[];++h<e;)a[h]===c&&(a[h]="__lodash_placeholder__",b[++l]=h);return b}function h(a){for(var h=-1,e=a.length;++h<e&&c(a.charCodeAt(h)););return h}function l(a){for(var h=a.length;h--&&c(a.charCodeAt(h)););return h}function F(a){return ub[a]}function I(c){function b(d){if(r(d)&&!H(d)&&!(d instanceof y)){if(d instanceof v)return d;if(R.call(d,"__chain__")&&R.call(d,"__wrapped__"))return fc(d)}return new v(d)}
function f(){}function v(d,g,k){this.__wrapped__=d;this.__actions__=k||[];this.__chain__=!!g}function y(d){this.__wrapped__=d;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=Xa;this.__views__=[]}function va(){this.__data__={}}function fa(d){var g=d?d.length:0;for(this.data={hash:Ya(null),set:new Za};g--;)this.push(d[g])}function ma(d,g){var k=d.data;return("string"==typeof g||M(g)?k.set.has(g):k.hash[g])?0:-1}function X(d,g){var k=-1,a=d.length;for(g||
(g=N(a));++k<a;)g[k]=d[k];return g}function ga(d,g){for(var k=-1,a=d.length;++k<a&&!1!==g(d[k],k,d););return d}function ua(d,g){for(var k=-1,a=d.length;++k<a;)if(!g(d[k],k,d))return!1;return!0}function Ka(d,g){for(var k=-1,a=d.length,c=-1,b=[];++k<a;){var h=d[k];g(h,k,d)&&(b[++c]=h)}return b}function Fa(d,g){for(var k=-1,a=d.length,c=N(a);++k<a;)c[k]=g(d[k],k,d);return c}function Ma(d,g){for(var k=-1,a=g.length,c=d.length;++k<a;)d[c+k]=g[k];return d}function La(d,g,k,a){var c=-1,b=d.length;for(a&&
b&&(k=d[++c]);++c<b;)k=g(k,d[c],c,d);return k}function gc(d,g){for(var k=-1,a=d.length;++k<a;)if(g(d[k],k,d))return!0;return!1}function hc(d,g,k,a){return d!==n&&R.call(a,k)?d:g}function vb(d,g,k){for(var a=-1,c=V(g),b=c.length;++a<b;){var h=c[a],e=d[h],l=k(e,g[h],h,d,g);(l===l?l===e:e!==e)&&(e!==n||h in d)||(d[h]=l)}return d}function Na(d,g){return null==g?d:ic(g,V(g),d)}function jc(d,g){for(var k=-1,a=null==d,c=!a&&T(d),b=c?d.length:0,h=g.length,e=N(h);++k<h;){var l=g[k];e[k]=c?pa(l,b)?d[l]:n:a?
n:d[l]}return e}function ic(d,g,k){k||(k={});for(var a=-1,c=g.length;++a<c;){var b=g[a];k[b]=d[b]}return k}function $a(d,g,k){var a=typeof d;return"function"==a?g===n?d:ba(d,g,k):null==d?wa:"object"==a?Oa(d):g===n?ab(d):kc(d,g)}function xa(d,g,k,a,c,b,h){var e;k&&(e=c?k(d,a,c):k(d));if(e!==n)return e;if(!M(d))return d;if(a=H(d)){if(e=Ud(d),!g)return X(d,e)}else{var l=ca.call(d),f="[object Function]"==l;if("[object Object]"==l||"[object Arguments]"==l||f&&!c){if(e=Vd(f?{}:d),!g)return Na(e,d)}else return O[l]?
Wd(d,l,g):c?d:{}}b||(b=[]);h||(h=[]);for(c=b.length;c--;)if(b[c]==d)return h[c];b.push(d);h.push(e);(a?ga:na)(d,function(a,c){e[c]=xa(a,g,k,c,d,b,h)});return e}function lc(d,g,k){if("function"!=typeof d)throw new da("Expected a function");return bb(function(){d.apply(n,k)},g)}function Pa(d,g){var k=d?d.length:0,a=[];if(!k)return a;var c=-1,b=Ga(),h=b==e,l=h&&200<=g.length?Ya&&Za?new fa(g):null:null,n=g.length;l&&(b=ma,h=!1,g=l);a:for(;++c<k;)if(l=d[c],h&&l===l){for(var f=n;f--;)if(g[f]===l)continue a;
a.push(l)}else 0>b(g,l,0)&&a.push(l);return a}function tb(d,g){var k=!0;ha(d,function(d,a,c){return k=!!g(d,a,c)});return k}function ub(d,g,k,a){var c=a,b=c;ha(d,function(d,h,e){h=+g(d,h,e);if(k(h,c)||h===a&&h===b)c=h,b=d});return b}function mc(d,g){var k=[];ha(d,function(d,a,c){g(d,a,c)&&k.push(d)});return k}function nc(d,g,k,a){var c;k(d,function(d,k,b){if(g(d,k,b))return c=a?k:d,!1});return c}function Z(d,g,k,a){a||(a=[]);for(var c=-1,b=d.length;++c<b;){var h=d[c];r(h)&&T(h)&&(k||H(h)||oa(h))?
g?Z(h,g,k,a):Ma(a,h):k||(a[a.length]=h)}return a}function oc(d,g){return wb(d,g,qa)}function na(d,g){return wb(d,g,V)}function xb(d,g){return pc(d,g,V)}function yb(d,g){for(var k=-1,a=g.length,c=-1,b=[];++k<a;){var h=g[k];ya(d[h])&&(b[++c]=h)}return b}function za(d,g,k){if(null!=d){k!==n&&k in ia(d)&&(g=[k]);k=0;for(var a=g.length;null!=d&&k<a;)d=d[g[k++]];return k&&k==a?d:n}}function cb(d,g,k,a,c,b){if(d===g)return!0;if(null==d||null==g||!M(d)&&!r(g))return d!==d&&g!==g;a:{var h=cb,e=H(d),l=H(g),
n="[object Array]",f="[object Array]";e||(n=ca.call(d),"[object Arguments]"==n?n="[object Object]":"[object Object]"!=n&&(e=Ha(d)));l||(f=ca.call(g),"[object Arguments]"==f?f="[object Object]":"[object Object]"!=f&&Ha(g));var m="[object Object]"==n,l="[object Object]"==f,f=n==f;if(!f||e||m){if(!a&&(n=m&&R.call(d,"__wrapped__"),l=l&&R.call(g,"__wrapped__"),n||l)){d=h(n?d.value():d,l?g.value():g,k,a,c,b);break a}if(f){c||(c=[]);b||(b=[]);for(n=c.length;n--;)if(c[n]==d){d=b[n]==g;break a}c.push(d);b.push(g);
d=(e?Xd:Yd)(d,g,h,k,a,c,b);c.pop();b.pop()}else d=!1}else d=Zd(d,g,n)}return d}function qc(d,g,k){var a=g.length,c=a,b=!k;if(null==d)return!c;for(d=ia(d);a--;){var h=g[a];if(b&&h[2]?h[1]!==d[h[0]]:!(h[0]in d))return!1}for(;++a<c;){var h=g[a],e=h[0],l=d[e],f=h[1];if(b&&h[2]){if(l===n&&!(e in d))return!1}else if(h=k?k(l,f,e):n,h===n?!cb(f,l,k,!0):!h)return!1}return!0}function zb(d,g){var k=-1,a=T(d)?N(d.length):[];ha(d,function(d,c,b){a[++k]=g(d,c,b)});return a}function Oa(d){var g=rc(d);if(1==g.length&&
g[0][2]){var k=g[0][0],a=g[0][1];return function(d){return null==d?!1:d[k]===a&&(a!==n||k in ia(d))}}return function(d){return qc(d,g)}}function kc(d,g){var k=H(d),a=Aa(d)&&g===g&&!M(g),c=d+"";d=ra(d);return function(b){if(null==b)return!1;var h=c;b=ia(b);if(!(!k&&a||h in b)){b=1==d.length?b:za(b,ea(d,0,-1));if(null==b)return!1;h=Qa(d);b=ia(b)}return b[h]===g?g!==n||h in b:cb(g,b[h],n,!0)}}function sc(d,g,k,a,c){if(!M(d))return d;var b=T(g)&&(H(g)||Ha(g)),h=b?n:V(g);ga(h||g,function(e,l){h&&(l=e,
e=g[l]);if(r(e)){a||(a=[]);c||(c=[]);a:{for(var f=l,m=a,t=c,C=m.length,F=g[f];C--;)if(m[C]==F){d[f]=t[C];break a}var C=d[f],E=k?k(C,F,f,d,g):n,q=E===n;q&&(E=F,T(F)&&(H(F)||Ha(F))?E=H(C)?C:T(C)?X(C):[]:db(F)||oa(F)?E=oa(C)?tc(C):db(C)?C:{}:q=!1);m.push(F);t.push(E);if(q)d[f]=sc(E,F,k,m,t);else if(E===E?E!==C:C===C)d[f]=E}}else f=d[l],m=k?k(f,e,l,d,g):n,(t=m===n)&&(m=e),m===n&&(!b||l in d)||!t&&(m===m?m===f:f!==f)||(d[l]=m)});return d}function Ab(d){return function(g){return null==g?n:g[d]}}function dc(d){var g=
d+"";d=ra(d);return function(k){return za(k,d,g)}}function uc(d,g){for(var k=d?g.length:0;k--;){var a=g[k];if(a!=c&&pa(a)){var c=a;vc.call(d,a,1)}}return d}function Bb(d,g){return d+Ba(wc()*(g-d+1))}function ec(d,g,k,a,c){c(d,function(d,c,b){k=a?(a=!1,d):g(k,d,c,b)});return k}function ea(d,g,k){var a=-1,c=d.length;g=null==g?0:+g||0;0>g&&(g=-g>c?0:c+g);k=k===n||k>c?c:+k||0;0>k&&(k+=c);c=g>k?0:k-g>>>0;g>>>=0;for(k=N(c);++a<c;)k[a]=d[a+g];return k}function $d(d,g){var k;ha(d,function(d,a,c){k=g(d,a,
c);return!k});return!!k}function xc(d,g){var k=d.length;for(d.sort(g);k--;)d[k]=d[k].value;return d}function yc(d,g,k){var a=L(),c=-1;g=Fa(g,function(d){return a(d)});d=zb(d,function(d){return{criteria:Fa(g,function(g){return g(d)}),index:++c,value:d}});return xc(d,function(d,g){var a;a:{for(var c=-1,b=d.criteria,h=g.criteria,Td=b.length,e=k.length;++c<Td;)if(a=p(b[c],h[c])){if(c>=e)break a;c=k[c];a*="asc"===c||!0===c?1:-1;break a}a=d.index-g.index}return a})}function ae(d,g){var k=0;ha(d,function(d,
a,c){k+=+g(d,a,c)||0});return k}function Cb(d,g){var k=-1,a=Ga(),c=d.length,b=a==e,h=b&&200<=c,l=h?Ya&&Za?new fa(void 0):null:null,f=[];l?(a=ma,b=!1):(h=!1,l=g?[]:f);a:for(;++k<c;){var n=d[k],m=g?g(n,k,d):n;if(b&&n===n){for(var C=l.length;C--;)if(l[C]===m)continue a;g&&l.push(m);f.push(n)}else 0>a(l,m,0)&&((g||h)&&l.push(m),f.push(n))}return f}function Db(d,g){for(var k=-1,a=g.length,c=N(a);++k<a;)c[k]=d[g[k]];return c}function eb(d,g,k,a){for(var c=d.length,b=a?c:-1;(a?b--:++b<c)&&g(d[b],b,d););
return k?ea(d,a?0:b,a?b+1:c):ea(d,a?b+1:0,a?c:b)}function zc(d,g){var k=d;k instanceof y&&(k=k.value());for(var a=-1,c=g.length;++a<c;)var b=g[a],k=b.func.apply(b.thisArg,Ma([k],b.args));return k}function Eb(d,g,k){var a=0,c=d?d.length:a;if("number"==typeof g&&g===g&&2147483647>=c){for(;a<c;){var b=a+c>>>1,h=d[b];(k?h<=g:h<g)&&null!==h?a=b+1:c=b}return c}return Ac(d,g,wa,k)}function Ac(d,g,k,a){g=k(g);for(var c=0,b=d?d.length:0,h=g!==g,e=null===g,l=g===n;c<b;){var f=Ba((c+b)/2),m=k(d[f]),C=m!==n,
t=m===m;(h?t||a:e?t&&C&&(a||null!=m):l?t&&(a||C):null==m?0:a?m<=g:m<g)?c=f+1:b=f}return aa(b,4294967294)}function ba(d,g,k){if("function"!=typeof d)return wa;if(g===n)return d;switch(k){case 1:return function(k){return d.call(g,k)};case 3:return function(k,a,c){return d.call(g,k,a,c)};case 4:return function(k,a,c,b){return d.call(g,k,a,c,b)};case 5:return function(k,a,c,b,h){return d.call(g,k,a,c,b,h)}}return function(){return d.apply(g,arguments)}}function Bc(d){var g=new be(d.byteLength);(new Cc(g)).set(new Cc(d));
return g}function Dc(d,g,k){for(var a=k.length,c=-1,b=U(d.length-a,0),h=-1,e=g.length,l=N(e+b);++h<e;)l[h]=g[h];for(;++c<a;)l[k[c]]=d[c];for(;b--;)l[h++]=d[c++];return l}function Ec(d,g,k){for(var a=-1,c=k.length,b=-1,h=U(d.length-c,0),e=-1,l=g.length,f=N(h+l);++b<h;)f[b]=d[b];for(h=b;++e<l;)f[h+e]=g[e];for(;++a<c;)f[h+k[a]]=d[b++];return f}function fb(d,g){return function(k,a,c){var b=g?g():{};a=L(a,c,3);if(H(k)){c=-1;for(var h=k.length;++c<h;){var e=k[c];d(b,e,a(e,c,k),k)}}else ha(k,function(g,
k,c){d(b,g,a(g,k,c),c)});return b}}function Fc(d){return K(function(g,k){var a=-1,c=null==g?0:k.length,b=2<c?k[c-2]:n,h=2<c?k[2]:n,e=1<c?k[c-1]:n;"function"==typeof b?(b=ba(b,e,5),c-=2):(b="function"==typeof e?e:n,c-=b?1:0);h&&J(k[0],k[1],h)&&(b=3>c?n:b,c=1);for(;++a<c;)(h=k[a])&&d(g,h,b);return g})}function Gc(d,g){return function(k,a){var c=k?Ra(k):0;if(!ka(c))return d(k,a);for(var b=g?c:-1,h=ia(k);(g?b--:++b<c)&&!1!==a(h[b],b,h););return k}}function Hc(d){return function(g,k,a){var c=ia(g);a=a(g);
for(var b=a.length,h=d?b:-1;d?h--:++h<b;){var e=a[h];if(!1===k(c[e],e,c))break}return g}}function ce(d,g){function k(){return(this&&this!==la&&this instanceof k?a:d).apply(g,arguments)}var a=gb(d);return k}function hb(d){return function(g){var k=-1;g=Ic(Jc(g));for(var a=g.length,c="";++k<a;)c=d(c,g[k],k);return c}}function gb(d){return function(){var g=arguments;switch(g.length){case 0:return new d;case 1:return new d(g[0]);case 2:return new d(g[0],g[1]);case 3:return new d(g[0],g[1],g[2]);case 4:return new d(g[0],
g[1],g[2],g[3]);case 5:return new d(g[0],g[1],g[2],g[3],g[4]);case 6:return new d(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new d(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var k=Sa(d.prototype),g=d.apply(k,g);return M(g)?g:k}}function Kc(d){function g(k,a,c){c&&J(k,a,c)&&(a=n);k=sa(k,d,n,n,n,n,n,a);k.placeholder=g.placeholder;return k}return g}function Lc(d,g){return K(function(k){var a=k[0];if(null==a)return a;k.push(g);return d.apply(n,k)})}function Mc(d,g){return function(k,a,c){c&&J(k,a,c)&&(a=n);
a=L(a,c,3);if(1==a.length){c=k=H(k)?k:Fb(k);for(var b=a,h=-1,e=c.length,l=g,f=l;++h<e;){var m=c[h],C=+b(m);d(C,l)&&(l=C,f=m)}c=f;if(!k.length||c!==g)return c}return ub(k,a,d,g)}}function Nc(d,g){return function(k,a,c){a=L(a,c,3);return H(k)?(a=z(k,a,g),-1<a?k[a]:n):nc(k,a,d)}}function Oc(d){return function(g,k,a){if(!g||!g.length)return-1;k=L(k,a,3);return z(g,k,d)}}function Pc(d){return function(g,k,a){k=L(k,a,3);return nc(g,k,d,!0)}}function Qc(d){return function(){for(var g,k=arguments.length,
a=d?k:-1,c=0,b=N(k);d?a--:++a<k;){var h=b[c++]=arguments[a];if("function"!=typeof h)throw new da("Expected a function");!g&&v.prototype.thru&&"wrapper"==ib(h)&&(g=new v([],!0))}for(a=g?-1:k;++a<k;){var h=b[a],c=ib(h),e="wrapper"==c?Gb(h):n;g=e&&Hb(e[0])&&424==e[1]&&!e[4].length&&1==e[9]?g[ib(e[0])].apply(g,e[3]):1==h.length&&Hb(h)?g[c]():g.thru(h)}return function(){var d=arguments,a=d[0];if(g&&1==d.length&&H(a)&&200<=a.length)return g.plant(a).value();for(var c=0,d=k?b[c].apply(this,d):a;++c<k;)d=
b[c].call(this,d);return d}}}function Rc(d,g){return function(k,a,c){return"function"==typeof a&&c===n&&H(k)?d(k,a):g(k,ba(a,c,3))}}function Sc(d){return function(g,k,a){if("function"!=typeof k||a!==n)k=ba(k,a,3);return d(g,k,qa)}}function Tc(d){return function(g,k,a){if("function"!=typeof k||a!==n)k=ba(k,a,3);return d(g,k)}}function Uc(d){return function(g,k,a){var c={};k=L(k,a,3);na(g,function(g,a,b){b=k(g,a,b);a=d?b:a;g=d?g:b;c[a]=g});return c}}function Vc(d){return function(g,k,a){g=w(g);return(d?
g:"")+Wc(g,k,a)+(d?"":g)}}function Xc(d){var g=K(function(k,c){var b=a(c,g.placeholder);return sa(k,d,n,c,b)});return g}function Yc(d,g){return function(k,a,c,b){var h=3>arguments.length;return"function"==typeof a&&b===n&&H(k)?d(k,a,c,h):ec(k,L(a,b,4),c,h,g)}}function Ib(d,g,k,c,b,h,e,l,f,m){function C(){for(var Q=arguments.length,u=Q,p=N(Q);u--;)p[u]=arguments[u];c&&(p=Dc(p,c,b));h&&(p=Ec(p,h,e));if(E||x){var u=C.placeholder,W=a(p,u),Q=Q-W.length;if(Q<m){var w=l?X(l):n,Q=U(m-Q,0),S=E?W:n,W=E?n:W,
z=E?p:n,p=E?n:p;g|=E?32:64;g&=~(E?64:32);q||(g&=-4);p=[d,g,k,z,S,p,W,w,f,Q];w=Ib.apply(n,p);Hb(d)&&Zc(w,p);w.placeholder=u;return w}}u=r?k:this;w=F?u[d]:d;if(l)for(Q=p.length,S=aa(l.length,Q),W=X(p);S--;)z=l[S],p[S]=pa(z,Q)?W[z]:n;t&&f<p.length&&(p.length=f);this&&this!==la&&this instanceof C&&(w=I||gb(d));return w.apply(u,p)}var t=g&128,r=g&1,F=g&2,E=g&8,q=g&4,x=g&16,I=F?n:gb(d);return C}function Wc(d,g,k){d=d.length;g=+g;if(d>=g||!Ia(g))return"";g-=d;k=null==k?" ":k+"";return $c(k,jb(g/k.length)).slice(0,
g)}function de(d,g,k,a){function c(){for(var g=-1,e=arguments.length,l=-1,f=a.length,n=N(f+e);++l<f;)n[l]=a[l];for(;e--;)n[l++]=arguments[++g];return(this&&this!==la&&this instanceof c?h:d).apply(b?k:this,n)}var b=g&1,h=gb(d);return c}function Jb(d){var g=Ca[d];return function(d,a){return(a=a===n?0:+a||0)?(a=ee(10,a),g(d*a)/a):g(d)}}function ad(d){return function(g,k,a,c){var b=L(a);return null==a&&b===$a?Eb(g,k,d):Ac(g,k,b(a,c,1),d)}}function sa(d,g,k,c,b,h,e,l){var f=g&2;if(!f&&"function"!=typeof d)throw new da("Expected a function");
var m=c?c.length:0;m||(g&=-97,c=b=n);m-=b?b.length:0;if(g&64){var C=c,t=b;c=b=n}var r=f?n:Gb(d);k=[d,g,k,c,b,C,t,h,e,l];if(r){c=k[1];g=r[1];l=c|g;b=128==g&&8==c||128==g&&256==c&&k[7].length<=r[8]||384==g&&8==c;if(128>l||b){g&1&&(k[2]=r[2],l|=c&1?0:4);if(c=r[3])b=k[3],k[3]=b?Dc(b,c,r[4]):X(c),k[4]=b?a(k[3],"__lodash_placeholder__"):X(r[4]);if(c=r[5])b=k[5],k[5]=b?Ec(b,c,r[6]):X(c),k[6]=b?a(k[5],"__lodash_placeholder__"):X(r[6]);(c=r[7])&&(k[7]=X(c));g&128&&(k[8]=null==k[8]?r[8]:aa(k[8],r[8]));null==
k[9]&&(k[9]=r[9]);k[0]=r[0];k[1]=l}g=k[1];l=k[9]}k[9]=null==l?f?0:d.length:U(l-m,0)||0;d=1==g?ce(k[0],k[2]):32!=g&&33!=g||k[4].length?Ib.apply(n,k):de.apply(n,k);return(r?bd:Zc)(d,k)}function Xd(d,g,k,a,c,b,h){var e=-1,l=d.length,f=g.length;if(l!=f&&!(c&&f>l))return!1;for(;++e<l;){var m=d[e],f=g[e],C=a?a(c?f:m,c?m:f,e):n;if(C!==n){if(C)continue;return!1}if(c){if(!gc(g,function(d){return m===d||k(m,d,a,c,b,h)}))return!1}else if(m!==f&&!k(m,f,a,c,b,h))return!1}return!0}function Zd(d,g,k){switch(k){case "[object Boolean]":case "[object Date]":return+d==
+g;case "[object Error]":return d.name==g.name&&d.message==g.message;case "[object Number]":return d!=+d?g!=+g:d==+g;case "[object RegExp]":case "[object String]":return d==g+""}return!1}function Yd(d,g,k,a,c,b,h){var e=V(d),l=e.length,f=V(g).length;if(l!=f&&!c)return!1;for(f=l;f--;){var m=e[f];if(!(c?m in g:R.call(g,m)))return!1}for(var C=c;++f<l;){var m=e[f],t=d[m],r=g[m],F=a?a(c?r:t,c?t:r,m):n;if(F===n?!k(t,r,a,c,b,h):!F)return!1;C||(C="constructor"==m)}return C||(k=d.constructor,a=g.constructor,
!(k!=a&&"constructor"in d&&"constructor"in g)||"function"==typeof k&&k instanceof k&&"function"==typeof a&&a instanceof a)?!0:!1}function L(d,g,a){var c=b.callback||kb,c=c===kb?$a:c;return a?c(d,g,a):c}function ib(d){for(var g=d.name,a=lb[g],c=a?a.length:0;c--;){var b=a[c],h=b.func;if(null==h||h==d)return b.name}return g}function Ga(d,g,a){var c=b.indexOf||Kb,c=c===Kb?e:c;return d?c(d,g,a):c}function rc(d){d=cd(d);for(var g=d.length;g--;){var a=d[g],c;c=d[g][1];c=c===c&&!M(c);a[2]=c}return d}function Ja(d,
g){var a=null==d?n:d[g];return dd(a)?a:n}function Ud(d){var g=d.length,a=new d.constructor(g);g&&"string"==typeof d[0]&&R.call(d,"index")&&(a.index=d.index,a.input=d.input);return a}function Vd(d){d=d.constructor;"function"==typeof d&&d instanceof d||(d=Da);return new d}function Wd(d,g,a){var c=d.constructor;switch(g){case "[object ArrayBuffer]":return Bc(d);case "[object Boolean]":case "[object Date]":return new c(+d);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return g=
d.buffer,new c(a?Bc(g):g,d.byteOffset,d.length);case "[object Number]":case "[object String]":return new c(d);case "[object RegExp]":var b=new c(d.source,ed.exec(d));b.lastIndex=d.lastIndex}return b}function Lb(d,g,a){null==d||Aa(g,d)||(g=ra(g),d=1==g.length?d:za(d,ea(g,0,-1)),g=Qa(g));g=null==d?d:d[g];return null==g?n:g.apply(d,a)}function T(d){return null!=d&&ka(Ra(d))}function pa(d,g){d="number"==typeof d||fe.test(d)?+d:-1;return-1<d&&0==d%1&&d<(null==g?9007199254740991:g)}function J(d,g,a){if(!M(a))return!1;
var c=typeof g;return("number"==c?T(a)&&pa(g,a.length):"string"==c&&g in a)?(g=a[g],d===d?d===g:g!==g):!1}function Aa(d,g){var a=typeof d;return"string"==a&&ge.test(d)||"number"==a?!0:H(d)?!1:!E.test(d)||null!=g&&d in ia(g)}function Hb(d){var g=ib(d);if(!(g in y.prototype))return!1;g=b[g];if(d===g)return!0;g=Gb(g);return!!g&&d===g[0]}function ka(d){return"number"==typeof d&&-1<d&&0==d%1&&9007199254740991>=d}function fd(d,g){return d===n?g:Mb(d,g,fd)}function gd(d,g){d=ia(d);for(var a=-1,c=g.length,
b={};++a<c;){var h=g[a];h in d&&(b[h]=d[h])}return b}function hd(d,g){var a={};oc(d,function(d,c,b){g(d,c,b)&&(a[c]=d)});return a}function id(d){for(var g=qa(d),a=g.length,c=a&&d.length,b=!!c&&ka(c)&&(H(d)||oa(d)),h=-1,e=[];++h<a;){var l=g[h];(b&&pa(l,c)||R.call(d,l))&&e.push(l)}return e}function Fb(d){return null==d?[]:T(d)?M(d)?d:Da(d):mb(d)}function ia(d){return M(d)?d:Da(d)}function ra(d){if(H(d))return d;var g=[];w(d).replace(he,function(d,a,c,b){g.push(c?b.replace(ie,"$1"):a||d)});return g}
function fc(d){return d instanceof y?d.clone():new v(d.__wrapped__,d.__chain__,X(d.__actions__))}function jd(d,g,a){if(!d||!d.length)return[];if(a?J(d,g,a):null==g)g=1;return ea(d,0>g?0:g)}function kd(d,g,a){var c=d?d.length:0;if(!c)return[];if(a?J(d,g,a):null==g)g=1;g=c-(+g||0);return ea(d,0,0>g?0:g)}function ld(d){return d?d[0]:n}function Kb(d,g,a){var c=d?d.length:0;if(!c)return-1;if("number"==typeof a)a=0>a?U(c+a,0):a;else if(a)return a=Eb(d,g),a<c&&(g===g?g===d[a]:d[a]!==d[a])?a:-1;return e(d,
g,a||0)}function Qa(d){var g=d?d.length:0;return g?d[g-1]:n}function md(d){return jd(d,1)}function nd(d,g,a,c){if(!d||!d.length)return[];null!=g&&"boolean"!=typeof g&&(c=a,a=J(d,g,c)?n:g,g=!1);var b=L();if(null!=a||b!==$a)a=b(a,c,3);if(g&&Ga()==e){g=a;var h;a=-1;c=d.length;for(var b=-1,l=[];++a<c;){var f=d[a],m=g?g(f,a,d):f;a&&h===m||(h=m,l[++b]=f)}d=l}else d=Cb(d,a);return d}function Nb(d){if(!d||!d.length)return[];var g=-1,a=0;d=Ka(d,function(d){if(T(d))return a=U(d.length,a),!0});for(var c=N(a);++g<
a;)c[g]=Fa(d,Ab(g));return c}function od(d,g,a){if(!d||!d.length)return[];d=Nb(d);if(null==g)return d;g=ba(g,a,4);return Fa(d,function(d){return La(d,g,n,!0)})}function pd(d,g){var a=-1,c=d?d.length:0,b={};for(!c||g||H(d[0])||(g=[]);++a<c;){var h=d[a];g?b[h]=g[a]:h&&(b[h[0]]=h[1])}return b}function qd(d){d=b(d);d.__chain__=!0;return d}function Ob(d,g,a){return g.call(a,d)}function rd(d,g,a){var c=H(d)?ua:tb;a&&J(d,g,a)&&(g=n);if("function"!=typeof g||a!==n)g=L(g,a,3);return c(d,g)}function Pb(d,g,
a){var c=H(d)?Ka:mc;g=L(g,a,3);return c(d,g)}function Qb(d,g,a,c){var b=d?Ra(d):0;ka(b)||(d=mb(d),b=d.length);a="number"!=typeof a||c&&J(g,a,c)?0:0>a?U(b+a,0):a||0;return"string"==typeof d||!H(d)&&Rb(d)?a<=b&&-1<d.indexOf(g,a):!!b&&-1<Ga(d,g,a)}function Sb(d,g,a){var c=H(d)?Fa:zb;g=L(g,a,3);return c(d,g)}function nb(d,g,a){if(a?J(d,g,a):null==g){d=Fb(d);var c=d.length;return 0<c?d[Bb(0,c-1)]:n}a=-1;d=sd(d);var c=d.length,b=c-1;for(g=aa(0>g?0:+g||0,c);++a<g;){var c=Bb(a,b),h=d[c];d[c]=d[a];d[a]=h}d.length=
g;return d}function td(d,g,a){var c=H(d)?gc:$d;a&&J(d,g,a)&&(g=n);if("function"!=typeof g||a!==n)g=L(g,a,3);return c(d,g)}function ud(d,g){var a;if("function"!=typeof g)if("function"==typeof d){var c=d;d=g;g=c}else throw new da("Expected a function");return function(){0<--d&&(a=g.apply(this,arguments));1>=d&&(g=n);return a}}function vd(d,g,a){function c(g,a){a&&Ta(a);f=r=F=n;g&&(E=Ua(),m=d.apply(t,l),r||f||(l=t=n))}function b(){var d=g-(Ua()-C);0>=d||d>g?c(F,f):r=bb(b,d)}function h(){c(x,r)}function e(){l=
arguments;C=Ua();t=this;F=x&&(r||!Q);if(!1===q)var a=Q&&!r;else{f||Q||(E=C);var c=q-(C-E),k=0>=c||c>q;k?(f&&(f=Ta(f)),E=C,m=d.apply(t,l)):f||(f=bb(h,c))}k&&r?r=Ta(r):r||g===q||(r=bb(b,g));a&&(k=!0,m=d.apply(t,l));!k||r||f||(l=t=n);return m}var l,f,m,C,t,r,F,E=0,q=!1,x=!0;if("function"!=typeof d)throw new da("Expected a function");g=0>g?0:+g||0;if(!0===a)var Q=!0,x=!1;else M(a)&&(Q=!!a.leading,q="maxWait"in a&&U(+a.maxWait||0,g),x="trailing"in a?!!a.trailing:x);e.cancel=function(){r&&Ta(r);f&&Ta(f);
E=0;f=r=F=n};return e}function Tb(d,g){if("function"!=typeof d||g&&"function"!=typeof g)throw new da("Expected a function");var a=function(){var c=arguments,b=g?g.apply(this,c):c[0],h=a.cache;if(h.has(b))return h.get(b);c=d.apply(this,c);a.cache=h.set(b,c);return c};a.cache=new Tb.Cache;return a}function K(d,g){if("function"!=typeof d)throw new da("Expected a function");g=U(g===n?d.length-1:+g||0,0);return function(){for(var a=arguments,c=-1,b=U(a.length-g,0),h=N(b);++c<b;)h[c]=a[g+c];switch(g){case 0:return d.call(this,
h);case 1:return d.call(this,a[0],h);case 2:return d.call(this,a[0],a[1],h)}b=N(g+1);for(c=-1;++c<g;)b[c]=a[c];b[g]=h;return d.apply(this,b)}}function wd(d,g){return d>g}function oa(d){return r(d)&&T(d)&&R.call(d,"callee")&&!je.call(d,"callee")}function xd(d,g,a,c){c=(a="function"==typeof a?ba(a,c,3):n)?a(d,g):n;return c===n?cb(d,g,a):!!c}function Ub(d){return r(d)&&"string"==typeof d.message&&"[object Error]"==ca.call(d)}function ya(d){return M(d)&&"[object Function]"==ca.call(d)}function M(d){var g=
typeof d;return!!d&&("object"==g||"function"==g)}function dd(d){return null==d?!1:ya(d)?ke.test(yd.call(d)):r(d)&&le.test(d)}function zd(d){return"number"==typeof d||r(d)&&"[object Number]"==ca.call(d)}function db(d){var g;if(!r(d)||"[object Object]"!=ca.call(d)||oa(d)||!(R.call(d,"constructor")||(g=d.constructor,"function"!=typeof g||g instanceof g)))return!1;var a;oc(d,function(d,g){a=g});return a===n||R.call(d,a)}function Ad(d){return M(d)&&"[object RegExp]"==ca.call(d)}function Rb(d){return"string"==
typeof d||r(d)&&"[object String]"==ca.call(d)}function Ha(d){return r(d)&&ka(d.length)&&!!P[ca.call(d)]}function Bd(d,g){return d<g}function sd(d){var g=d?Ra(d):0;return ka(g)?g?X(d):[]:mb(d)}function tc(d){return ic(d,qa(d))}function Vb(d){return yb(d,qa(d))}function qa(d){if(null==d)return[];M(d)||(d=Da(d));for(var g=d.length,g=g&&ka(g)&&(H(d)||oa(d))&&g||0,a=d.constructor,c=-1,a="function"==typeof a&&a.prototype===d,b=N(g),h=0<g;++c<g;)b[c]=c+"";for(var e in d)h&&pa(e,g)||"constructor"==e&&(a||
!R.call(d,e))||b.push(e);return b}function cd(d){d=ia(d);for(var g=-1,a=V(d),c=a.length,b=N(c);++g<c;){var h=a[g];b[g]=[h,d[h]]}return b}function mb(d){return Db(d,V(d))}function Jc(d){return(d=w(d))&&d.replace(me,B).replace(ob,"")}function $c(d,g){var a="";d=w(d);g=+g;if(1>g||!d||!Ia(g))return a;do g%2&&(a+=d),g=Ba(g/2),d+=d;while(g);return a}function Cd(d,g,a){var c=d;d=w(d);if(!d)return d;if(a?J(c,g,a):null==g)return d.slice(h(d),l(d)+1);g+="";return d.slice(u(d,g),q(d,g)+1)}function Ic(d,g,a){a&&
J(d,g,a)&&(g=n);d=w(d);return d.match(g||ne)||[]}function kb(d,g,a){a&&J(d,g,a)&&(g=n);return r(d)?Dd(d):$a(d,g)}function wa(d){return d}function Dd(d){return Oa(xa(d,!0))}function Wb(d,g,a){if(null==a){var c=M(g),b=c?V(g):n;((b=b&&b.length?yb(g,b):n)?b.length:c)||(b=!1,a=g,g=d,d=this)}b||(b=yb(g,V(g)));var h=!0,c=-1,e=ya(d),l=b.length;!1===a?h=!1:M(a)&&"chain"in a&&(h=a.chain);for(;++c<l;){a=b[c];var f=g[a];d[a]=f;e&&(d.prototype[a]=function(g){return function(){var a=this.__chain__;if(h||a){var c=
d(this.__wrapped__);(c.__actions__=X(this.__actions__)).push({func:g,args:arguments,thisArg:d});c.__chain__=a;return c}return g.apply(d,Ma([this.value()],arguments))}}(f))}return d}function Ed(){}function ab(d){return Aa(d)?Ab(d):dc(d)}c=c?ta.defaults(la.Object(),c,ta.pick(la,oe)):la;var N=c.Array,Fd=c.Date,pe=c.Error,Gd=c.Function,Ca=c.Math,Hd=c.Number,Da=c.Object,Xb=c.RegExp,Id=c.String,da=c.TypeError,Jd=N.prototype,Yb=Da.prototype,qe=Id.prototype,yd=Gd.prototype.toString,R=Yb.hasOwnProperty,re=
0,ca=Yb.toString,se=la._,ke=Xb("^"+yd.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=c.ArrayBuffer,Ta=c.clearTimeout,te=c.parseFloat,ee=Ca.pow,je=Yb.propertyIsEnumerable,Za=Ja(c,"Set"),bb=c.setTimeout,vc=Jd.splice,Cc=c.Uint8Array,Kd=Ja(c,"WeakMap"),jb=Ca.ceil,Ya=Ja(Da,"create"),Ba=Ca.floor,ue=Ja(N,"isArray"),Ia=c.isFinite,Ld=Ja(Da,"keys"),U=Ca.max,aa=Ca.min,ve=Ja(Fd,"now"),we=c.parseInt,wc=Ca.random,xe=Hd.NEGATIVE_INFINITY,
Xa=Hd.POSITIVE_INFINITY,pb=Kd&&new Kd,lb={};b.support={};b.templateSettings={escape:ja,evaluate:qb,interpolate:Ea,variable:"",imports:{_:b}};var Sa=function(){function d(){}return function(g){if(M(g)){d.prototype=g;var a=new d;d.prototype=n}return a||{}}}(),ha=Gc(na),Zb=Gc(xb,!0),wb=Hc(),pc=Hc(!0),bd=pb?function(d,g){pb.set(d,g);return d}:wa,Gb=pb?function(d){return pb.get(d)}:Ed,Ra=Ab("length"),Zc=function(){var d=0,g=0;return function(a,c){var b=Ua(),h=16-(b-g);g=b;if(0<h){if(150<=++d)return a}else d=
0;return bd(a,c)}}(),ye=K(function(d,g){return r(d)&&T(d)?Pa(d,Z(g,!1,!0)):[]}),ze=Oc(),Ae=Oc(!0),Be=K(function(d){for(var g=d.length,a=g,c=N(n),b=Ga(),h=b==e,l=[];a--;){var f=d[a]=T(f=d[a])?f:[];c[a]=h&&120<=f.length?Ya&&Za?new fa(a&&f):null:null}var h=d[0],m=-1,n=h?h.length:0,C=c[0];a:for(;++m<n;)if(f=h[m],0>(C?ma(C,f):b(l,f,0))){for(a=g;--a;){var t=c[a];if(0>(t?ma(t,f):b(d[a],f,0)))continue a}C&&C.push(f);l.push(f)}return l}),Ce=K(function(d,g){g=Z(g);var a=jc(d,g);uc(d,g.sort(p));return a}),De=
ad(),Ee=ad(!0),Fe=K(function(d){return Cb(Z(d,!1,!0))}),Ge=K(function(d,g){return T(d)?Pa(d,g):[]}),He=K(Nb),Ie=K(function(d){var g=d.length,a=2<g?d[g-2]:n,c=1<g?d[g-1]:n;2<g&&"function"==typeof a?g-=2:(a=1<g&&"function"==typeof c?(--g,c):n,c=n);d.length=g;return od(d,a,c)}),Je=K(function(d){d=Z(d);return this.thru(function(g){g=H(g)?g:[ia(g)];for(var a=d,c=-1,b=g.length,h=-1,e=a.length,l=N(b+e);++c<b;)l[c]=g[c];for(;++h<e;)l[c++]=a[h];return l})}),Ke=K(function(d,g){return jc(d,Z(g))}),Le=fb(function(d,
g,a){R.call(d,a)?++d[a]:d[a]=1}),$b=Nc(ha),Me=Nc(Zb,!0),Md=Rc(ga,ha),Nd=Rc(function(d,g){for(var a=d.length;a--&&!1!==g(d[a],a,d););return d},Zb),Ne=fb(function(d,g,a){R.call(d,a)?d[a].push(g):d[a]=[g]}),Oe=fb(function(d,a,c){d[c]=a}),Pe=K(function(d,a,c){var b=-1,h="function"==typeof a,e=Aa(a),l=T(d)?N(d.length):[];ha(d,function(d){var f=h?a:e&&null!=d?d[a]:n;l[++b]=f?f.apply(d,c):Lb(d,a,c)});return l}),Qe=fb(function(d,a,c){d[c?0:1].push(a)},function(){return[[],[]]}),ac=Yc(La,ha),Od=Yc(function(d,
a,c,b){var h=d.length;for(b&&h&&(c=d[--h]);h--;)c=a(c,d[h],h,d);return c},Zb),Re=K(function(d,a){if(null==d)return[];var c=a[2];c&&J(a[0],a[1],c)&&(a.length=1);return yc(d,Z(a),[])}),Ua=ve||function(){return(new Fd).getTime()},Pd=K(function(d,g,c){var b=1;if(c.length)var h=a(c,Pd.placeholder),b=b|32;return sa(d,b,g,c,h)}),Se=K(function(d,a){a=a.length?Z(a):Vb(d);for(var c=-1,b=a.length;++c<b;){var h=a[c];d[h]=sa(d[h],1,d)}return d}),Qd=K(function(d,g,c){var b=3;if(c.length)var h=a(c,Qd.placeholder),
b=b|32;return sa(g,b,d,c,h)}),Te=Kc(8),Ue=Kc(16),Ve=K(function(d,a){return lc(d,1,a)}),We=K(function(d,a,c){return lc(d,a,c)}),Xe=Qc(),bc=Qc(!0),Ye=K(function(d,a){a=Z(a);if("function"!=typeof d||!ua(a,D))throw new da("Expected a function");var c=a.length;return K(function(b){for(var h=aa(b.length,c);h--;)b[h]=a[h](b[h]);return d.apply(this,b)})}),Ze=Xc(32),$e=Xc(64),af=K(function(d,a){return sa(d,256,n,n,n,Z(a))}),H=ue||function(d){return r(d)&&ka(d.length)&&"[object Array]"==ca.call(d)},Mb=Fc(sc),
cc=Fc(function(d,a,c){return c?vb(d,a,c):Na(d,a)}),bf=Lc(cc,function(d,a){return d===n?a:d}),cf=Lc(Mb,fd),df=Pc(na),ef=Pc(xb),ff=Sc(wb),gf=Sc(pc),hf=Tc(na),jf=Tc(xb),V=Ld?function(d){var a=null==d?n:d.constructor;return"function"==typeof a&&a.prototype===d||"function"!=typeof d&&T(d)?id(d):M(d)?Ld(d):[]}:id,kf=Uc(!0),lf=Uc(),mf=K(function(d,a){if(null==d)return{};if("function"!=typeof a[0])return a=Fa(Z(a),Id),gd(d,Pa(qa(d),a));var c=ba(a[0],a[1],3);return hd(d,function(d,a,g){return!c(d,a,g)})}),
nf=K(function(d,a){return null==d?{}:"function"==typeof a[0]?hd(d,ba(a[0],a[1],3)):gd(d,Z(a))}),of=hb(function(d,a,c){a=a.toLowerCase();return d+(c?a.charAt(0).toUpperCase()+a.slice(1):a)}),pf=hb(function(d,a,c){return d+(c?"-":"")+a.toLowerCase()}),qf=Vc(),rf=Vc(!0),sf=hb(function(d,a,c){return d+(c?"_":"")+a.toLowerCase()}),tf=hb(function(d,a,c){return d+(c?" ":"")+(a.charAt(0).toUpperCase()+a.slice(1))}),Rd=K(function(d,a){try{return d.apply(n,a)}catch(c){return Ub(c)?c:new pe(c)}}),uf=K(function(d,
a){return function(c){return Lb(c,d,a)}}),vf=K(function(d,a){return function(c){return Lb(d,c,a)}}),wf=Jb("ceil"),xf=Jb("floor"),yf=Mc(wd,xe),zf=Mc(Bd,Xa),Af=Jb("round");b.prototype=f.prototype;v.prototype=Sa(f.prototype);v.prototype.constructor=v;y.prototype=Sa(f.prototype);y.prototype.constructor=y;va.prototype["delete"]=function(d){return this.has(d)&&delete this.__data__[d]};va.prototype.get=function(d){return"__proto__"==d?n:this.__data__[d]};va.prototype.has=function(d){return"__proto__"!=d&&
R.call(this.__data__,d)};va.prototype.set=function(d,a){"__proto__"!=d&&(this.__data__[d]=a);return this};fa.prototype.push=function(d){var a=this.data;"string"==typeof d||M(d)?a.set.add(d):a.hash[d]=!0};Tb.Cache=va;b.after=function(d,a){if("function"!=typeof a)if("function"==typeof d){var c=d;d=a;a=c}else throw new da("Expected a function");d=Ia(d=+d)?d:0;return function(){if(1>--d)return a.apply(this,arguments)}};b.ary=function(d,a,c){c&&J(d,a,c)&&(a=n);a=d&&null==a?d.length:U(+a||0,0);return sa(d,
128,n,n,n,n,a)};b.assign=cc;b.at=Ke;b.before=ud;b.bind=Pd;b.bindAll=Se;b.bindKey=Qd;b.callback=kb;b.chain=qd;b.chunk=function(d,a,c){a=(c?J(d,a,c):null==a)?1:U(Ba(a)||1,1);c=0;for(var b=d?d.length:0,h=-1,e=N(jb(b/a));c<b;)e[++h]=ea(d,c,c+=a);return e};b.compact=function(d){for(var a=-1,c=d?d.length:0,b=-1,h=[];++a<c;){var e=d[a];e&&(h[++b]=e)}return h};b.constant=function(d){return function(){return d}};b.countBy=Le;b.create=function(d,a,c){var b=Sa(d);c&&J(d,a,c)&&(a=n);return a?Na(b,a):b};b.curry=
Te;b.curryRight=Ue;b.debounce=vd;b.defaults=bf;b.defaultsDeep=cf;b.defer=Ve;b.delay=We;b.difference=ye;b.drop=jd;b.dropRight=kd;b.dropRightWhile=function(d,a,c){return d&&d.length?eb(d,L(a,c,3),!0,!0):[]};b.dropWhile=function(d,a,c){return d&&d.length?eb(d,L(a,c,3),!0):[]};b.fill=function(d,a,c,b){var h=d?d.length:0;if(!h)return[];c&&"number"!=typeof c&&J(d,a,c)&&(c=0,b=h);h=d.length;c=null==c?0:+c||0;0>c&&(c=-c>h?0:h+c);b=b===n||b>h?h:+b||0;0>b&&(b+=h);h=c>b?0:b>>>0;for(c>>>=0;c<h;)d[c++]=a;return d};
b.filter=Pb;b.flatten=function(d,a,c){var b=d?d.length:0;c&&J(d,a,c)&&(a=!1);return b?Z(d,a):[]};b.flattenDeep=function(d){return d&&d.length?Z(d,!0):[]};b.flow=Xe;b.flowRight=bc;b.forEach=Md;b.forEachRight=Nd;b.forIn=ff;b.forInRight=gf;b.forOwn=hf;b.forOwnRight=jf;b.functions=Vb;b.groupBy=Ne;b.indexBy=Oe;b.initial=function(d){return kd(d,1)};b.intersection=Be;b.invert=function(d,a,c){c&&J(d,a,c)&&(a=n);c=-1;for(var b=V(d),h=b.length,e={};++c<h;){var l=b[c],f=d[l];a?R.call(e,f)?e[f].push(l):e[f]=
[l]:e[f]=l}return e};b.invoke=Pe;b.keys=V;b.keysIn=qa;b.map=Sb;b.mapKeys=kf;b.mapValues=lf;b.matches=Dd;b.matchesProperty=function(d,a){return kc(d,xa(a,!0))};b.memoize=Tb;b.merge=Mb;b.method=uf;b.methodOf=vf;b.mixin=Wb;b.modArgs=Ye;b.negate=function(d){if("function"!=typeof d)throw new da("Expected a function");return function(){return!d.apply(this,arguments)}};b.omit=mf;b.once=function(d){return ud(2,d)};b.pairs=cd;b.partial=Ze;b.partialRight=$e;b.partition=Qe;b.pick=nf;b.pluck=function(d,a){return Sb(d,
ab(a))};b.property=ab;b.propertyOf=function(d){return function(a){return za(d,ra(a),a+"")}};b.pull=function(){var d=arguments,a=d[0];if(!a||!a.length)return a;for(var c=0,b=Ga(),h=d.length;++c<h;)for(var e=0,l=d[c];-1<(e=b(a,l,e));)vc.call(a,e,1);return a};b.pullAt=Ce;b.range=function(d,a,c){c&&J(d,a,c)&&(a=c=n);d=+d||0;c=null==c?1:+c||0;null==a?(a=d,d=0):a=+a||0;var b=-1;a=U(jb((a-d)/(c||1)),0);for(var h=N(a);++b<a;)h[b]=d,d+=c;return h};b.rearg=af;b.reject=function(d,a,c){var b=H(d)?Ka:mc;a=L(a,
c,3);return b(d,function(d,c,b){return!a(d,c,b)})};b.remove=function(d,a,c){var b=[];if(!d||!d.length)return b;var h=-1,e=[],l=d.length;for(a=L(a,c,3);++h<l;)c=d[h],a(c,h,d)&&(b.push(c),e.push(h));uc(d,e);return b};b.rest=md;b.restParam=K;b.set=function(d,a,c){if(null==d)return d;var b=a+"";a=null!=d[b]||Aa(a,d)?[b]:ra(a);for(var b=-1,h=a.length,e=h-1,l=d;null!=l&&++b<h;){var f=a[b];M(l)&&(b==e?l[f]=c:null==l[f]&&(l[f]=pa(a[b+1])?[]:{}));l=l[f]}return d};b.shuffle=function(d){return nb(d,Xa)};b.slice=
function(d,a,c){var b=d?d.length:0;if(!b)return[];c&&"number"!=typeof c&&J(d,a,c)&&(a=0,c=b);return ea(d,a,c)};b.sortBy=function(d,a,c){if(null==d)return[];c&&J(d,a,c)&&(a=n);var b=-1;a=L(a,c,3);d=zb(d,function(d,c,h){return{criteria:a(d,c,h),index:++b,value:d}});return xc(d,A)};b.sortByAll=Re;b.sortByOrder=function(d,a,c,b){if(null==d)return[];b&&J(a,c,b)&&(c=n);H(a)||(a=null==a?[]:[a]);H(c)||(c=null==c?[]:[c]);return yc(d,a,c)};b.spread=function(d){if("function"!=typeof d)throw new da("Expected a function");
return function(a){return d.apply(this,a)}};b.take=function(d,a,c){if(!d||!d.length)return[];if(c?J(d,a,c):null==a)a=1;return ea(d,0,0>a?0:a)};b.takeRight=function(d,a,c){var b=d?d.length:0;if(!b)return[];if(c?J(d,a,c):null==a)a=1;a=b-(+a||0);return ea(d,0>a?0:a)};b.takeRightWhile=function(d,a,c){return d&&d.length?eb(d,L(a,c,3),!1,!0):[]};b.takeWhile=function(d,a,c){return d&&d.length?eb(d,L(a,c,3)):[]};b.tap=function(d,a,c){a.call(c,d);return d};b.throttle=function(d,a,c){var b=!0,h=!0;if("function"!=
typeof d)throw new da("Expected a function");!1===c?b=!1:M(c)&&(b="leading"in c?!!c.leading:b,h="trailing"in c?!!c.trailing:h);return vd(d,a,{leading:b,maxWait:+a,trailing:h})};b.thru=Ob;b.times=function(d,a,c){d=Ba(d);if(1>d||!Ia(d))return[];var b=-1,h=N(aa(d,4294967295));for(a=ba(a,c,1);++b<d;)4294967295>b?h[b]=a(b):a(b);return h};b.toArray=sd;b.toPlainObject=tc;b.transform=function(d,a,c,b){var h=H(d)||Ha(d);a=L(a,b,4);null==c&&(h||M(d)?(b=d.constructor,c=h?H(d)?new b:[]:Sa(ya(b)?b.prototype:n)):
c={});(h?ga:na)(d,function(d,b,h){return a(c,d,b,h)});return c};b.union=Fe;b.uniq=nd;b.unzip=Nb;b.unzipWith=od;b.values=mb;b.valuesIn=function(d){return Db(d,qa(d))};b.where=function(d,a){return Pb(d,Oa(a))};b.without=Ge;b.wrap=function(d,a){a=null==a?wa:a;return sa(a,32,n,[d],[])};b.xor=function(){for(var d=-1,a=arguments.length;++d<a;){var c=arguments[d];if(T(c))var b=b?Ma(Pa(b,c),Pa(c,b)):c}return b?Cb(b):[]};b.zip=He;b.zipObject=pd;b.zipWith=Ie;b.backflow=bc;b.collect=Sb;b.compose=bc;b.each=Md;
b.eachRight=Nd;b.extend=cc;b.iteratee=kb;b.methods=Vb;b.object=pd;b.select=Pb;b.tail=md;b.unique=nd;Wb(b,b);b.add=function(d,a){return(+d||0)+(+a||0)};b.attempt=Rd;b.camelCase=of;b.capitalize=function(d){return(d=w(d))&&d.charAt(0).toUpperCase()+d.slice(1)};b.ceil=wf;b.clone=function(d,a,c,b){a&&"boolean"!=typeof a&&J(d,a,c)?a=!1:"function"==typeof a&&(b=c,c=a,a=!1);return"function"==typeof c?xa(d,a,ba(c,b,1)):xa(d,a)};b.cloneDeep=function(d,a,c){return"function"==typeof a?xa(d,!0,ba(a,c,1)):xa(d,
!0)};b.deburr=Jc;b.endsWith=function(d,a,c){d=w(d);a+="";var b=d.length;c=c===n?b:aa(0>c?0:+c||0,b);c-=a.length;return 0<=c&&d.indexOf(a,c)==c};b.escape=function(d){return(d=w(d))&&Va.test(d)?d.replace(S,G):d};b.escapeRegExp=function(d){return(d=w(d))&&Y.test(d)?d.replace(Sd,x):d||"(?:)"};b.every=rd;b.find=$b;b.findIndex=ze;b.findKey=df;b.findLast=Me;b.findLastIndex=Ae;b.findLastKey=ef;b.findWhere=function(d,a){return $b(d,Oa(a))};b.first=ld;b.floor=xf;b.get=function(d,a,c){d=null==d?n:za(d,ra(a),
a+"");return d===n?c:d};b.gt=wd;b.gte=function(d,a){return d>=a};b.has=function(d,a){if(null==d)return!1;var c=R.call(d,a);if(!c&&!Aa(a)){a=ra(a);d=1==a.length?d:za(d,ea(a,0,-1));if(null==d)return!1;a=Qa(a);c=R.call(d,a)}return c||ka(d.length)&&pa(a,d.length)&&(H(d)||oa(d))};b.identity=wa;b.includes=Qb;b.indexOf=Kb;b.inRange=function(d,a,c){a=+a||0;c===n?(c=a,a=0):c=+c||0;return d>=aa(a,c)&&d<U(a,c)};b.isArguments=oa;b.isArray=H;b.isBoolean=function(d){return!0===d||!1===d||r(d)&&"[object Boolean]"==
ca.call(d)};b.isDate=function(d){return r(d)&&"[object Date]"==ca.call(d)};b.isElement=function(d){return!!d&&1===d.nodeType&&r(d)&&!db(d)};b.isEmpty=function(d){return null==d?!0:T(d)&&(H(d)||Rb(d)||oa(d)||r(d)&&ya(d.splice))?!d.length:!V(d).length};b.isEqual=xd;b.isError=Ub;b.isFinite=function(d){return"number"==typeof d&&Ia(d)};b.isFunction=ya;b.isMatch=function(d,a,c,b){c="function"==typeof c?ba(c,b,3):n;return qc(d,rc(a),c)};b.isNaN=function(d){return zd(d)&&d!=+d};b.isNative=dd;b.isNull=function(d){return null===
d};b.isNumber=zd;b.isObject=M;b.isPlainObject=db;b.isRegExp=Ad;b.isString=Rb;b.isTypedArray=Ha;b.isUndefined=function(d){return d===n};b.kebabCase=pf;b.last=Qa;b.lastIndexOf=function(d,a,c){var b=d?d.length:0;if(!b)return-1;var h=b;if("number"==typeof c)h=(0>c?U(b+c,0):aa(c||0,b-1))+1;else if(c)return h=Eb(d,a,!0)-1,d=d[h],(a===a?a===d:d!==d)?h:-1;if(a!==a)return m(d,h,!0);for(;h--;)if(d[h]===a)return h;return-1};b.lt=Bd;b.lte=function(d,a){return d<=a};b.max=yf;b.min=zf;b.noConflict=function(){la._=
se;return this};b.noop=Ed;b.now=Ua;b.pad=function(d,a,c){d=w(d);a=+a;var b=d.length;if(b>=a||!Ia(a))return d;b=(a-b)/2;a=Ba(b);b=jb(b);c=Wc("",b,c);return c.slice(0,a)+d+c};b.padLeft=qf;b.padRight=rf;b.parseInt=function(a,c,b){(b?J(a,c,b):null==c)?c=0:c&&(c=+c);a=Cd(a);return we(a,c||(Bf.test(a)?16:10))};b.random=function(a,c,b){b&&J(a,c,b)&&(c=b=n);var h=null==a,e=null==c;null==b&&(e&&"boolean"==typeof a?(b=a,a=1):"boolean"==typeof c&&(b=c,e=!0));h&&e&&(c=1,e=!1);a=+a||0;e?(c=a,a=0):c=+c||0;return b||
a%1||c%1?(b=wc(),aa(a+b*(c-a+te("1e-"+((b+"").length-1))),c)):Bb(a,c)};b.reduce=ac;b.reduceRight=Od;b.repeat=$c;b.result=function(a,c,b){var h=null==a?n:a[c];h===n&&(null==a||Aa(c,a)||(c=ra(c),a=1==c.length?a:za(a,ea(c,0,-1)),h=null==a?n:a[Qa(c)]),h=h===n?b:h);return ya(h)?h.call(a):h};b.round=Af;b.runInContext=I;b.size=function(a){var c=a?Ra(a):0;return ka(c)?c:V(a).length};b.snakeCase=sf;b.some=td;b.sortedIndex=De;b.sortedLastIndex=Ee;b.startCase=tf;b.startsWith=function(a,c,b){a=w(a);b=null==b?
0:aa(0>b?0:+b||0,a.length);return a.lastIndexOf(c,b)==b};b.sum=function(a,c,b){b&&J(a,c,b)&&(c=n);c=L(c,b,3);if(1==c.length){a=H(a)?a:Fb(a);b=a.length;for(var h=0;b--;)h+=+c(a[b])||0;a=h}else a=ae(a,c);return a};b.template=function(a,c,h){var e=b.templateSettings;h&&J(a,c,h)&&(c=h=n);a=w(a);c=vb(Na({},h||c),e,hc);h=vb(Na({},c.imports),e.imports,hc);var l=V(h),f=Db(h,l),m,r,F=0;h=c.interpolate||rb;var E="__p += '";h=Xb((c.escape||rb).source+"|"+h.source+"|"+(h===Ea?Cf:rb).source+"|"+(c.evaluate||rb).source+
"|$","g");var q="//# sourceURL="+("sourceURL"in c?c.sourceURL:"lodash.templateSources["+ ++Df+"]")+"\n";a.replace(h,function(c,b,g,h,e,l){g||(g=h);E+=a.slice(F,l).replace(Ef,t);b&&(m=!0,E+="' +\n__e("+b+") +\n'");e&&(r=!0,E+="';\n"+e+";\n__p += '");g&&(E+="' +\n((__t = ("+g+")) == null ? '' : __t) +\n'");F=l+c.length;return c});E+="';\n";(c=c.variable)||(E="with (obj) {\n"+E+"\n}\n");E=(r?E.replace(sb,""):E).replace(C,"$1").replace(Q,"$1;");E="function("+(c||"obj")+") {\n"+(c?"":"obj || (obj = {});\n")+
"var __t, __p = ''"+(m?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+E+"return __p\n}";c=Rd(function(){return Gd(l,q+"return "+E).apply(n,f)});c.source=E;if(Ub(c))throw c;return c};b.trim=Cd;b.trimLeft=function(a,c,b){var e=a;return(a=w(a))?(b?J(e,c,b):null==c)?a.slice(h(a)):a.slice(u(a,c+"")):a};b.trimRight=function(a,c,b){var h=a;return(a=w(a))?(b?J(h,c,b):null==c)?a.slice(0,l(a)+1):a.slice(0,q(a,c+"")+1):a};b.trunc=function(a,
c,b){b&&J(a,c,b)&&(c=n);var h=30;b="...";if(null!=c)if(M(c)){var e="separator"in c?c.separator:e,h="length"in c?+c.length||0:h;b="omission"in c?w(c.omission):b}else h=+c||0;a=w(a);if(h>=a.length)return a;h-=b.length;if(1>h)return b;c=a.slice(0,h);if(null==e)return c+b;if(Ad(e)){if(a.slice(h).search(e)){var l,f=a.slice(0,h);e.global||(e=Xb(e.source,(ed.exec(e)||"")+"g"));for(e.lastIndex=0;a=e.exec(f);)l=a.index;c=c.slice(0,null==l?h:l)}}else a.indexOf(e,h)!=h&&(e=c.lastIndexOf(e),-1<e&&(c=c.slice(0,
e)));return c+b};b.unescape=function(a){return(a=w(a))&&Wa.test(a)?a.replace(W,F):a};b.uniqueId=function(a){var c=++re;return w(a)+c};b.words=Ic;b.all=rd;b.any=td;b.contains=Qb;b.eq=xd;b.detect=$b;b.foldl=ac;b.foldr=Od;b.head=ld;b.include=Qb;b.inject=ac;Wb(b,function(){var a={};na(b,function(c,h){b.prototype[h]||(a[h]=c)});return a}(),!1);b.sample=nb;b.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(c){return nb(c,a)}):nb(this.value())};b.VERSION="3.10.1";ga("bind bindKey curry curryRight partial partialRight".split(" "),
function(a){b[a].placeholder=b});ga(["drop","take"],function(a,c){y.prototype[a]=function(b){var h=this.__filtered__;if(h&&!c)return new y(this);b=null==b?1:U(Ba(b)||0,0);var e=this.clone();h?e.__takeCount__=aa(e.__takeCount__,b):e.__views__.push({size:b,type:a+(0>e.__dir__?"Right":"")});return e};y.prototype[a+"Right"]=function(c){return this.reverse()[a](c).reverse()}});ga(["filter","map","takeWhile"],function(a,c){var b=c+1,h=2!=b;y.prototype[a]=function(a,d){var c=this.clone();c.__iteratees__.push({iteratee:L(a,
d,1),type:b});c.__filtered__=c.__filtered__||h;return c}});ga(["first","last"],function(a,c){var b="take"+(c?"Right":"");y.prototype[a]=function(){return this[b](1).value()[0]}});ga(["initial","rest"],function(a,c){var b="drop"+(c?"":"Right");y.prototype[a]=function(){return this.__filtered__?new y(this):this[b](1)}});ga(["pluck","where"],function(a,c){var b=c?"filter":"map",h=c?Oa:ab;y.prototype[a]=function(a){return this[b](h(a))}});y.prototype.compact=function(){return this.filter(wa)};y.prototype.reject=
function(a,c){a=L(a,c,1);return this.filter(function(c){return!a(c)})};y.prototype.slice=function(a,c){a=null==a?0:+a||0;var b=this;if(b.__filtered__&&(0<a||0>c))return new y(b);0>a?b=b.takeRight(-a):a&&(b=b.drop(a));c!==n&&(c=+c||0,b=0>c?b.dropRight(-c):b.take(c-a));return b};y.prototype.takeRightWhile=function(a,c){return this.reverse().takeWhile(a,c).reverse()};y.prototype.toArray=function(){return this.take(Xa)};na(y.prototype,function(a,c){var h=/^(?:filter|map|reject)|While$/.test(c),e=/^(?:first|last)$/.test(c),
l=b[e?"take"+("last"==c?"Right":""):c];l&&(b.prototype[c]=function(){var c=e?[1]:arguments,b=this.__chain__,g=this.__wrapped__,f=!!this.__actions__.length,m=g instanceof y,C=c[0],t=m||H(g);t&&h&&"function"==typeof C&&1!=C.length&&(m=t=!1);var r=function(a){return e&&b?l(a,1)[0]:l.apply(n,Ma([a],c))},C={func:Ob,args:[r],thisArg:n},f=m&&!f;return e&&!b?f?(g=g.clone(),g.__actions__.push(C),a.call(g)):l.call(n,this.value())[0]:!e&&t?(g=f?g:new y(this),g=a.apply(g,c),g.__actions__.push(C),new v(g,b)):
this.thru(r)})});ga("join pop push replace shift sort splice split unshift".split(" "),function(a){var c=(/^(?:replace|split)$/.test(a)?qe:Jd)[a],h=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",e=/^(?:join|pop|replace|shift)$/.test(a);b.prototype[a]=function(){var a=arguments;return e&&!this.__chain__?c.apply(this.value(),a):this[h](function(d){return c.apply(d,a)})}});na(y.prototype,function(a,c){var h=b[c];if(h){var e=h.name;(lb[e]||(lb[e]=[])).push({name:c,func:h})}});lb[Ib(n,2).name]=[{name:"wrapper",
func:n}];y.prototype.clone=function(){var a=new y(this.__wrapped__);a.__actions__=X(this.__actions__);a.__dir__=this.__dir__;a.__filtered__=this.__filtered__;a.__iteratees__=X(this.__iteratees__);a.__takeCount__=this.__takeCount__;a.__views__=X(this.__views__);return a};y.prototype.reverse=function(){if(this.__filtered__){var a=new y(this);a.__dir__=-1;a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a};y.prototype.value=function(){var a,c=this.__wrapped__.value(),b=this.__dir__,h=H(c),
e=0>b,l=h?c.length:0;a=0;for(var f=l,m=this.__views__,n=-1,C=m.length;++n<C;){var t=m[n],r=t.size;switch(t.type){case "drop":a+=r;break;case "dropRight":f-=r;break;case "take":f=aa(f,a+r);break;case "takeRight":a=U(a,f-r)}}m=f;f=m-a;a=e?m:a-1;m=this.__iteratees__;n=m.length;C=0;t=aa(f,this.__takeCount__);if(!h||200>l||l==f&&t==f)return zc(e&&h?c.reverse():c,this.__actions__);h=[];a:for(;f--&&C<t;){a+=b;e=-1;for(l=c[a];++e<n;){var E=m[e],r=E.iteratee,E=E.type,r=r(l);if(2==E)l=r;else if(!r)if(1==E)continue a;
else break a}h[C++]=l}return h};b.prototype.chain=function(){return qd(this)};b.prototype.commit=function(){return new v(this.value(),this.__chain__)};b.prototype.concat=Je;b.prototype.plant=function(a){for(var c,b=this;b instanceof f;){var h=fc(b);c?e.__wrapped__=h:c=h;var e=h,b=b.__wrapped__}e.__wrapped__=a;return c};b.prototype.reverse=function(){var a=this.__wrapped__,c=function(a){return b&&0>b.__dir__?a:a.reverse()};if(a instanceof y){var b=a;this.__actions__.length&&(b=new y(this));b=b.reverse();
b.__actions__.push({func:Ob,args:[c],thisArg:n});return new v(b,this.__chain__)}return this.thru(c)};b.prototype.toString=function(){return this.value()+""};b.prototype.run=b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=function(){return zc(this.__wrapped__,this.__actions__)};b.prototype.collect=b.prototype.map;b.prototype.head=b.prototype.first;b.prototype.select=b.prototype.filter;b.prototype.tail=b.prototype.rest;return b}var n,sb=/\b__p \+= '';/g,C=/\b(__p \+=) '' \+/g,Q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,
W=/&(?:amp|lt|gt|quot|#39|#96);/g,S=/[&<>"'`]/g,Wa=RegExp(W.source),Va=RegExp(S.source),ja=/<%-([\s\S]+?)%>/g,qb=/<%([\s\S]+?)%>/g,Ea=/<%=([\s\S]+?)%>/g,E=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,ge=/^\w*$/,he=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Sd=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Y=RegExp(Sd.source),ob=/[\u0300-\u036f\ufe20-\ufe23]/g,ie=/\\(\\)?/g,Cf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ed=/\w*$/,Bf=/^0[xX]/,le=
/^\[object .+?Constructor\]$/,fe=/^\d+$/,me=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,rb=/($^)/,Ef=/['\n\r\u2028\u2029\\]/g,ne=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),oe="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout isFinite parseFloat parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap".split(" "),
Df=-1,P={};P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0;P["[object Arguments]"]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Error]"]=P["[object Function]"]=P["[object Map]"]=P["[object Number]"]=P["[object Object]"]=P["[object RegExp]"]=P["[object Set]"]=
P["[object String]"]=P["[object WeakMap]"]=!1;var O={};O["[object Arguments]"]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Number]"]=O["[object Object]"]=O["[object RegExp]"]=O["[object String]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0;O["[object Error]"]=
O["[object Function]"]=O["[object Map]"]=O["[object Set]"]=O["[object WeakMap]"]=!1;var va={"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i",
"\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o","\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss"},Ka={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},ub={"&amp;":"&","&lt;":"<","&gt;":">",
"&quot;":'"',"&#39;":"'","&#96;":"`"},fa={"function":!0,object:!0},tb={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},La={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ma=fa[typeof b]&&b&&!b.nodeType&&b,ua=fa[typeof y]&&y&&!y.nodeType&&y,dc=fa[typeof self]&&self&&self.Object&&self,fa=fa[typeof window]&&
window&&window.Object&&window,ec=ua&&ua.exports===ma&&ma,la=ma&&ua&&"object"==typeof f&&f&&f.Object&&f||fa!==(this&&this.window)&&fa||dc||this,ta=I();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(la._=ta,define(function(){return ta})):ma&&ua?ec?(ua.exports=ta)._=ta:ma._=ta:la._=ta}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],9:[function(f,y,b){var v,p,z,e,D,w,u,q,A,B,G,x,t,m,r,c,a,h,l,F,
I,n,sb=[].indexOf||function(a){for(var c=0,b=this.length;c<b;c++)if(c in this&&this[c]===a)return c;return-1};v=f("lodash");n=f("./util");G=f("./match");I=f("./substitute");x=function(a){a=n.cloneExpression(a);a=I.doSubRecursive(a,I.subsForPNF.replace_arrow);a=I.doSubRecursive(a,I.subsForPNF.replace_double_arrow);a=c(a);return a=n.exhaust(a,function(a){var c,b,h;b=I.subsForPNF;for(c in b)h=b[c],"replace_arrow"!==c&&"replace_double_arrow"!==c&&(a=I.doSubRecursive(a,h));return a})};b.prenexNormalForm=
x;b.isPNF=function(a){var c,b,h,e,l,f,n,t;a=m(a);c=A(a,"and");a=[];h=0;for(e=c.length;h<e;h++)b=c[h],a.push(A(b,"or"));b=0;for(e=a.length;b<e;b++)for(t=a[b],h=0,l=t.length;h<l;h++)if(c=t[h],"not"!==(f=c.type)&&"sentence_letter"!==f&&"predicate"!==f||"not"===c.type&&"sentence_letter"!==(n=c.left.type)&&"predicate"!==n)return!1;return!0};c=function(a,c){var b,h,e,l,f,m;null==c&&(c="x");l=("\u03b1"===(f=c[0])||"\u03b2"===f||"\u03b3"===f||"\u03c4"===f?"term_metavariable":void 0)||"variable";b=0;h={};
e=function(a){var e;null==h[a.name]&&(b+=1,e=""+c+b,h[a.name]=e);return h[a.name]};m=function(a){if(null!=h[a.name])return delete h[a.name]};return n.walkMutate(a,function(a){if(null===a||null==(null!=a?a.boundVariable:void 0)&&(null==(null!=a?a.type:void 0)||"variable"!==a.type))return a;null!=a.boundVariable&&m(a.boundVariable);null!=(null!=a?a.type:void 0)&&"variable"===a.type&&(a.name=e(a),a.type=l);return a},{topDown:!0})};b.renameVariables=c;b.convertToPNFsimplifyAndSort=function(c){c=x(c);
c=w(c);c=F(c);a(c);return c};b.areExpressionsEquivalent=function(a,c){a=x(a);c=x(c);return z(a,c)};z=function(b,h){var l,f,n;b=w(b);b=F(b);a(b);h=w(h);h=F(h);a(h);f=c(b,"\u03c4");l=m(f);n=m(h);l=G.find(n,l);if(!1===l)return!1;f=G.apply(f,l);return e(f,h)};b.arePNFExpressionsEquivalent=z;F=function(a){var c,b,e,f,n;n=u(a);a=m(a);c=A(a,"and");a=[];e=0;for(f=c.length;e<f;e++)b=c[e],a.push(A(b,"or"));b=0;for(e=a.length;b<e;b++)c=a[b],h(c);l(a);f=[];b=0;for(e=a.length;b<e;b++)c=a[b],f.push(t(c,"or"));
a=t(f,"and");return D(a,n)};b.sortPNFExpression=F;m=function(a){return null!=a.boundVariable?m(a.left):a};b.removeQuantifiers=m;A=function(a,c){var b;if(null!=a.type&&a.type!==c)return[a];if(null!=a.type&&a.type===c)return b=[],b.push.apply(b,A(a.left,c)),b.push.apply(b,A(a.right,c)),b;throw Error("listJuncts called with type = "+c+" and unrecognized expression = "+JSON.stringify(a,null,4));};b.listJuncts=A;h=function(a){return a.sort(n.atomicExpressionComparator)};b.sortJuncts=h;l=function(a){return a.sort(n.listOfAtomicExpressionsComparator)};
b.sortListOfJuncts=l;t=function(a,c){var b,h;if(!a||null==a.length||0===a.length)throw Error("rebuildExpression called with listOfJuncts = "+a);if(1===a.length)return a[0];b=a.shift();h=t(a,c);return{type:c,left:b,right:h}};b.rebuildExpression=t;B=function(a,c){var b;if(null!=a.type&&a.type!==c)return{quantifiedExpression:a};if(null!=a.type&&a.type===c)return b=B(a.left,c),null==b.boundVariables&&(b.boundVariables=[]),b.boundVariables.push(a.boundVariable),b;throw Error("listQuants called with type = "+
c+" and unrecognized expression = "+JSON.stringify(a,null,4));};b.listQuants=B;u=function(a){var c;return null!=a.boundVariable?(c=u(a.left),{type:a.type,symbol:a.symbol,location:a.location,boundVariable:a.boundVariable,left:c,right:null}):null};b.getPrefixedQuantifiers=u;D=function(a,c){if(null===c)return a;null!==c.left?D(a,c.left):c.left=a;return c};b.attachExpressionToQuantifiers=D;e=function(a,c,b){var h;null==b&&(b={quantifierType:null,leftBoundVariables:[],rightBoundVariables:[]});h=(null!=
a?a.type:void 0)||null;if(b.quantifierType!==h){b.leftBoundVariables.sort();b.rightBoundVariables.sort();if(!v.isEqual(b.leftBoundVariables,b.rightBoundVariables))return!1;b.leftBoundVariables=[];b.rightBoundVariables=[];b.quantifierType=h}if(null===a||null==a.boundVariable)return null===c||null==c.boundVariable?!0:!1;if(null===c||null==c.type||c.type!==h)return!1;b.leftBoundVariables.push(a.boundVariable.name);b.rightBoundVariables.push(c.boundVariable.name);return e(a.left,c.left,b)};b.arePrefixedQuantifiersEquivalent=
e;a=function(c,b){var h,e,l,f;void 0===b&&(b=p(c));if(null==(null!=c?c.type:void 0))return c;if("identity"!==c.type)return null!=c.left&&a(c.left,b),null!=c.right&&a(c.right,b),c;h=c.termlist[0];l=c.termlist[1];1===n.termComparator(h,l)&&(e=[l,h],h=e[0],l=e[1]);"variable"===h.type&&"variable"===l.type&&(e=b.indexOf(h.name),f=b.indexOf(l.name),e>f&&(e=[l,h],h=e[0],l=e[1]));c.termlist=[h,l];return c};b.sortIdentityStatements=a;p=function(a,c){var b,h;null==c&&(c={quantifierType:null,thisTypeBoundVariables:[],
allBoundVariables:[]});b=(null!=a?a.type:void 0)||null;c.quantifierType!==b&&(c.thisTypeBoundVariables.sort(),(h=c.allBoundVariables).push.apply(h,c.thisTypeBoundVariables),c.thisTypeBoundVariables=[],c.quantifierType=b);if(null===b||null==a.boundVariable)return c.allBoundVariables;c.thisTypeBoundVariables.push(a.boundVariable.name);return p(a.left,c)};b._getVariableOrder=p;w=function(a){a=n.exhaust(a,function(a){var c,b,h;b=I.subs_eliminate_redundancy;for(c in b)h=b[c],a=I.doSubRecursive(a,h);return F(a)});
return a=r(a)};b.eliminateRedundancyInPNF=w;q=function(a,c){var b;if(null!=c.termlist){var h,e,l,f;l=c.termlist;f=[];h=0;for(e=l.length;h<e;h++)b=l[h],f.push(b.name);if(0<=sb.call(f,a))return!0}return null!=c.boundVariable&&c.boundVariable.name===a?!1:null!=c.left&&q(a,c.left)||null!=c.right&&q(a,c.right)?!0:!1};b.isVariableFree=q;r=function(a){a=n.cloneExpression(a);return n.walkMutate(a,function(a){return null==(null!=a?a.boundVariable:void 0)||q(a.boundVariable.name,a.left)?a:a.left})};b.removeQuantifiersThatBindNothing=
r},{"./match":7,"./substitute":21,"./util":22,lodash:8}],10:[function(f,y,b){(function(v){var p=function(){function b(){this.yy={}}var e=function(a,c,b,h){b=b||{};for(h=a.length;h--;b[a[h]]=c);return b},f=[1,4],p=[1,5],u=[1,6],q=[1,7],A=[1,8],B=[1,9],v=[1,11],x=[1,14],t=[1,15],m=[1,17],r=[1,18],c=[1,16],a=[1,20],h=[1,21],l=[1,22],F=[1,23],I=[1,24],n=[1,25],y=[1,26],C=[1,32],Q=[1,30],W=[1,31],S=[5,10,12,13,14,15,16,17,26,28,33],Wa=[5,10,12,13,14,15,16,17,25,26,28,33],Va=[7,9,10,11,18,19,20,22,29,30,
31,32,34],ja=[5,10,12,13,14,15,16,17,28,33],qb=[5,10,28,33],Ea=[28,33],e={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,box:6,existential_quantifier:7,quantifier_variable:8,"(":9,")":10,universal_quantifier:11,and:12,or:13,nand:14,nor:15,arrow:16,double_arrow:17,not:18,"true":19,"false":20,sentence_letter_or_expression_variable:21,predicate:22,termlist:23,term:24,identity:25,"[":26,substitution_list:27,"]":28,expression_variable:29,sentence_letter:30,variable:31,term_metavariable:32,
",":33,name:34,substitution:35,"null":36,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"existential_quantifier",9:"(",10:")",11:"universal_quantifier",12:"and",13:"or",14:"nand",15:"nor",16:"arrow",17:"double_arrow",18:"not",19:"true",20:"false",22:"predicate",25:"identity",26:"[",28:"]",29:"expression_variable",30:"sentence_letter",31:"variable",32:"term_metavariable",33:",",34:"name",36:"null"},productions_:[0,[3,2],[3,2],[3,3],[4,3],[4,5],[4,3],[4,5],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,
2],[4,1],[4,1],[4,1],[4,4],[4,3],[4,3],[4,4],[21,1],[21,1],[8,1],[8,1],[8,3],[23,1],[23,3],[24,1],[24,1],[24,1],[27,1],[27,3],[35,3],[35,3],[35,3],[35,3],[6,3]],performAction:function(a,c,b,h,e,l,f){a=l.length-1;switch(e){case 1:case 2:return l[a-1];case 3:return l[a-1].box=l[a-2],l[a-1];case 4:this.$={type:"existential_quantifier",symbol:l[a-2],location:f[a-2],boundVariable:l[a-1],left:l[a],right:null};break;case 5:this.$={type:"existential_quantifier",symbol:l[a-3],location:f[a-3],boundVariable:l[a-
2],left:l[a],right:null};break;case 6:this.$={type:"universal_quantifier",symbol:l[a-2],location:f[a-2],boundVariable:l[a-1],left:l[a],right:null};break;case 7:this.$={type:"universal_quantifier",symbol:l[a-3],location:f[a-3],boundVariable:l[a-2],left:l[a],right:null};break;case 8:this.$={type:"and",symbol:l[a-1],location:f[a-1],left:l[a-2],right:l[a]};break;case 9:this.$={type:"or",symbol:l[a-1],location:f[a-1],left:l[a-2],right:l[a]};break;case 10:this.$={type:"nand",symbol:l[a-1],location:f[a-
1],left:l[a-2],right:l[a]};break;case 11:this.$={type:"nor",symbol:l[a-1],location:f[a-1],left:l[a-2],right:l[a]};break;case 12:this.$={type:"arrow",symbol:l[a-1],location:f[a-1],left:l[a-2],right:l[a]};break;case 13:this.$={type:"double_arrow",symbol:l[a-1],location:f[a-1],left:l[a-2],right:l[a]};break;case 14:this.$={type:"not",symbol:l[a-1],location:f[a-1],left:l[a],right:null};break;case 15:this.$={type:"value",symbol:l[a],location:f[a],value:!0,left:null,right:null};break;case 16:this.$={type:"value",
symbol:l[a],location:f[a],value:!1,left:null,right:null};break;case 17:this.$=l[a];break;case 18:this.$={type:"predicate",name:l[a-3],location:f[a-3],termlist:l[a-1]};break;case 19:this.$={type:"identity",symbol:l[a-1],termlist:[l[a-2],l[a]]};break;case 20:case 26:this.$=l[a-1];break;case 21:l[a-3].substitutions=l[a-3].substitutions&&l[a-3].substitutions.length?l[a-3].substitutions.concat(l[a-1]):l[a-1];this.$=l[a-3];break;case 22:this.$={type:"expression_variable",location:f[a],letter:l[a],left:null,
right:null};break;case 23:this.$={type:"sentence_letter",location:f[a],letter:l[a],left:null,right:null};break;case 24:case 30:this.$={type:"variable",name:l[a],location:f[a]};break;case 25:case 31:this.$={type:"term_metavariable",name:l[a],location:f[a]};break;case 27:case 32:this.$=[l[a]];break;case 28:case 33:this.$=[l[a-2]].concat(l[a]);break;case 29:this.$={type:"name",name:l[a],location:f[a]};break;case 34:case 36:this.$={type:"substitution",from:l[a-2],to:l[a],symbol:l[a-1]};break;case 35:case 37:this.$=
{type:"substitution",from:l[a-2],to:null,symbol:l[a-1]};break;case 38:this.$={type:"box",term:l[a-1]}}},table:[{3:1,4:2,6:3,7:f,9:p,11:u,18:q,19:A,20:B,21:10,22:v,24:12,26:[1,13],29:x,30:t,31:m,32:r,34:c},{1:[3]},{5:[1,19],12:a,13:h,14:l,15:F,16:I,17:n,26:y},{4:28,5:[1,27],7:f,9:p,11:u,18:q,19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c},{8:29,9:C,31:Q,32:W},{4:35,7:[1,33],9:p,11:[1,34],18:q,19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c},{8:36,9:C,31:Q,32:W},{4:37,7:f,9:p,11:u,18:q,19:A,
20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c},e(S,[2,15]),e(S,[2,16]),e(S,[2,17]),{9:[1,38]},{25:[1,39]},{24:40,31:m,32:r,34:c},e(S,[2,22]),e(S,[2,23]),e(Wa,[2,29]),e(Wa,[2,30]),e(Wa,[2,31]),{1:[2,1]},{4:41,7:f,9:p,11:u,18:q,19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c},{4:42,7:f,9:p,11:u,18:q,19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c},{4:43,7:f,9:p,11:u,18:q,19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c},{4:44,7:f,9:p,11:u,18:q,19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,
34:c},{4:45,7:f,9:p,11:u,18:q,19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c},{4:46,7:f,9:p,11:u,18:q,19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c},{21:50,24:49,27:47,29:x,30:t,31:m,32:r,34:c,35:48},{1:[2,2]},{5:[1,51],12:a,13:h,14:l,15:F,16:I,17:n,26:y},{4:52,7:f,9:p,11:u,18:q,19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c},e(Va,[2,24]),e(Va,[2,25]),{8:53,9:C,31:Q,32:W},{8:54,9:C,31:Q,32:W},{8:55,9:C,31:Q,32:W},{10:[1,56],12:a,13:h,14:l,15:F,16:I,17:n,26:y},{4:57,7:f,9:p,11:u,18:q,
19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c},e(ja,[2,14],{26:y}),{23:58,24:59,31:m,32:r,34:c},{24:60,31:m,32:r,34:c},{28:[1,61]},e(ja,[2,8],{26:y}),e(ja,[2,9],{26:y}),e(ja,[2,10],{26:y}),e(ja,[2,11],{26:y}),e(qb,[2,12],{12:a,13:h,14:l,15:F,26:y}),e(qb,[2,13],{12:a,13:h,14:l,15:F,26:y}),{28:[1,62]},{28:[2,32],33:[1,63]},{16:[1,64]},{16:[1,65]},{1:[2,3]},e(ja,[2,4],{26:y}),{10:[1,66]},{4:52,7:f,9:p,10:[1,67],11:u,18:q,19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c},{4:57,7:f,9:p,10:[1,
68],11:u,18:q,19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c},e(S,[2,20]),e(ja,[2,6],{26:y}),{10:[1,69]},{10:[2,27],33:[1,70]},e(S,[2,19]),e([5,7,9,11,18,19,20,22,29,30,31,32,34],[2,38]),e(S,[2,21]),{21:50,24:49,27:71,29:x,30:t,31:m,32:r,34:c,35:48},{24:72,31:m,32:r,34:c,36:[1,73]},{4:74,7:f,9:p,11:u,18:q,19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c,36:[1,75]},e(Va,[2,26]),{4:76,7:f,9:p,11:u,18:q,19:A,20:B,21:10,22:v,24:12,29:x,30:t,31:m,32:r,34:c},{4:77,7:f,9:p,11:u,18:q,19:A,20:B,21:10,
22:v,24:12,29:x,30:t,31:m,32:r,34:c},e(S,[2,18]),{23:78,24:59,31:m,32:r,34:c},{28:[2,33]},e(Ea,[2,34]),e(Ea,[2,35]),e(Ea,[2,36],{12:a,13:h,14:l,15:F,16:I,17:n,26:y}),e(Ea,[2,37]),e(ja,[2,5],{26:y}),e(ja,[2,7],{26:y}),{10:[2,28]}],defaultActions:{19:[2,1],27:[2,2],51:[2,3],71:[2,33],78:[2,28]},parseError:function(a,c){if(c.recoverable)this.trace(a);else{var b=function(a,c){this.message=a;this.hash=c};b.prototype=Error;throw new b(a,c);}},parse:function(a){var c=[0],b=[null],h=[],e=this.table,l="",
f=0,m=0,n=0,t=h.slice.call(arguments,1),r=Object.create(this.lexer),F={},q;for(q in this.yy)Object.prototype.hasOwnProperty.call(this.yy,q)&&(F[q]=this.yy[q]);r.setInput(a,F);F.lexer=r;F.parser=this;"undefined"==typeof r.yylloc&&(r.yylloc={});q=r.yylloc;h.push(q);var p=r.options&&r.options.ranges;this.parseError="function"===typeof F.parseError?F.parseError:Object.getPrototypeOf(this).parseError;for(var x,C,u,I,z={},A,v;;){u=c[c.length-1];if(this.defaultActions[u])I=this.defaultActions[u];else{if(null===
x||"undefined"==typeof x)x=void 0,x=r.lex()||1,"number"!==typeof x&&(x=this.symbols_[x]||x);I=e[u]&&e[u][x]}if("undefined"===typeof I||!I.length||!I[0]){var w="";v=[];for(A in e[u])this.terminals_[A]&&2<A&&v.push("'"+this.terminals_[A]+"'");w=r.showPosition?"Parse error on line "+(f+1)+":\n"+r.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[x]||x)+"'":"Parse error on line "+(f+1)+": Unexpected "+(1==x?"end of input":"'"+(this.terminals_[x]||x)+"'");this.parseError(w,{text:r.match,
token:this.terminals_[x]||x,line:r.yylineno,loc:q,expected:v})}if(I[0]instanceof Array&&1<I.length)throw Error("Parse Error: multiple actions possible at state: "+u+", token: "+x);switch(I[0]){case 1:c.push(x);b.push(r.yytext);h.push(r.yylloc);c.push(I[1]);x=null;C?(x=C,C=null):(m=r.yyleng,l=r.yytext,f=r.yylineno,q=r.yylloc,0<n&&n--);break;case 2:v=this.productions_[I[1]][1];z.$=b[b.length-v];z._$={first_line:h[h.length-(v||1)].first_line,last_line:h[h.length-1].last_line,first_column:h[h.length-
(v||1)].first_column,last_column:h[h.length-1].last_column};p&&(z._$.range=[h[h.length-(v||1)].range[0],h[h.length-1].range[1]]);u=this.performAction.apply(z,[l,m,f,F,I[1],b,h].concat(t));if("undefined"!==typeof u)return u;v&&(c=c.slice(0,-2*v),b=b.slice(0,-1*v),h=h.slice(0,-1*v));c.push(this.productions_[I[1]][0]);b.push(z.$);h.push(z._$);I=e[c[c.length-2]][c[c.length-1]];c.push(I);break;case 3:return!0}}}},f=function(){return{EOF:1,parseError:function(a,c){if(this.yy.parser)this.yy.parser.parseError(a,
c);else throw Error(a);},setInput:function(a,c){this.yy=c||this.yy||{};this._input=a;this._more=this._backtrack=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?
(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var c=a.length,b=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-c);this.offset-=c;a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);b.length-1&&(this.yylineno-=b.length-1);var h=
this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:b?(b.length===a.length?this.yylloc.first_column:0)+a[a.length-b.length].length-b[0].length:this.yylloc.first_column-c};this.options.ranges&&(this.yylloc.range=[h[0],h[0]+this.yyleng-c]);this.yyleng=this.yytext.length;return this},more:function(){this._more=!0;return this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+
(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,
20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),c=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+c+"^"},test_match:function(a,c){var b,h;this.options.backtrack_lexer&&(h={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,
yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(h.yylloc.range=this.yylloc.range.slice(0)));if(b=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=b.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:b?b[b.length-1].length-b[b.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=
a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._backtrack=this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];b=this.performAction.call(this,this.yy,this,c,this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(b)return b;if(this._backtrack)for(var e in h)this[e]=h[e];return!1},next:function(){if(this.done)return this.EOF;this._input||
(this.done=!0);var a,c,b;this._more||(this.match=this.yytext="");for(var h=this._currentRules(),e=0;e<h.length;e++)if((c=this._input.match(this.rules[h[e]]))&&(!a||c[0].length>a[0].length))if(a=c,b=e,this.options.backtrack_lexer){a=this.test_match(c,h[e]);if(!1!==a)return a;if(this._backtrack)a=!1;else return!1}else if(!this.options.flex)break;return a?(a=this.test_match(a,h[b]),!1!==a?a:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+
this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){a=
this.conditionStack.length-1-Math.abs(a||0);return 0<=a?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(a,c,b,h){switch(b){case 1:return 9;case 2:return 10;case 3:return 26;case 4:return 28;case 5:return 33;case 6:return 22;case 7:return 19;case 8:return 20;case 9:return 25;case 10:return 12;case 11:return 16;case 12:return 17;case 13:return 13;case 14:return 18;case 15:return 15;
case 16:return 14;case 17:return 11;case 18:return 7;case 19:return 30;case 20:return 34;case 21:return 31;case 22:return 29;case 23:return 32;case 24:return 36;case 25:return 5;case 26:return"invalid_character"}},rules:[/^(?:\s+)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:[A-Z][A-Za-z0-9]*(?=(\()))/,/^(?:[tT][rR][uU][eE])/,/^(?:[fF][aA][lL][sS][eE]|\u22a5|_\|_|[cC][oO][nN][tT][rR][aA][dD][iI][cC][tT][iI][oO][nN]|[cC][oO][nN][tT][rR][aA])/,/^(?:=)/,/^(?:[aA][nN][dD]|&|\u2227|\u2022)/,
/^(?:[aA][rR][rR][oO][wW]|->|\u21d2|\u2192|\u2283)/,/^(?:\u2194|\u2261|\u21d4|double_arrow|<->)/,/^(?:[oO][rR]|\u2228|\+|\u01c0\u01c0|\|)/,/^(?:[nN][oO][tT]|\u00ac|\u02dc|!)/,/^(?:[nN][oO][rR]|\u2193)/,/^(?:[nN][aA][nN][dD]|\u2191)/,/^(?:[aA][lL][lL]|\u2200|[eE][vV][eE][rR][yY])/,/^(?:[sS][oO][mM][eE]|[eE][xX][iI][sS][tT][sS]|\u2203)/,/^(?:[A-Z][0-9]*)/,/^(?:[a-d][0-9]*)/,/^(?:[etxyzw][0-9]*)/,/^(?:[\u03c6\u03c8\u03c7][0-9]*)/,/^(?:[\u03b1\u03b2\u03b3\u03c4][0-9]*)/,/^(?:[nN][uU][lL][lL])/,/^(?:$)/,
/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}}}();e.lexer=f;b.prototype=e;e.Parser=b;return new b}();"undefined"!==typeof f&&"undefined"!==typeof b&&(b.parser=p,b.Parser=p.Parser,b.parse=function(){return p.parse.apply(p,arguments)},b.main=function(p){p[1]||(console.log("Usage: "+p[0]+" FILE"),v.exit(1));p=f("fs").readFileSync(f("path").normalize(p[1]),"utf8");return b.parser.parse(p)},"undefined"!==typeof y&&f.main===
y&&b.main(v.argv.slice(1)))}).call(this,f("_process"))},{_process:3,fs:1,path:2}],11:[function(f,y,b){var v,p,z,e,D,w,u,q,A,B,G,x,t,m;p=f("lodash");t=f("./justification_parser");w=f("./add_line_numbers").cleanNumber;v=t.parse("premise");b.to=function(b){var c;c={visit:function(a){var c,b;if("line"===a.type&&null==a.justification&&null==a.justificationErrors){b=m(a.content);a.justification=b.justification;if(null!=(null!=(c=a.justification)?c.numbers:void 0)){var e=a.justification,f,n,r,t;r=a.justification.numbers;
t=[];f=0;for(n=r.length;f<n;f++)c=r[f],t.push(w(c));e.numbers=t}a.content=b.rest;a.justificationErrors=b.justificationErrors;a.justificationText=b.justificationText;a.getRuleName=x;a.findLine=q;a.findBlock=u;a.findLineOrBlock=A;a.getCitedLines=G;a.getCitedBlocks=B}}};b.walk(c);c={visit:function(a){"line"===a.type&&null==a.justification&&null==a.justificationErrors&&D(a)&&(a.justification=v)}};b.walk(c);c={visit:function(a){"block"===a.type&&(a.getConclusion=function(){var c;c=p.last(a.content);return"line"===
c.type&&null!=c.sentence?c.sentence:!1},a.getPremises=function(){var c,b;c=p.filter(a.content,function(a){var c,b;return"line"!==a.type||null==a.sentence||"premise"!==(null!=(c=a.justification)?null!=(b=c.rule)?b.connective:void 0:void 0)?!1:!0});return function(){var a,e,f;f=[];a=0;for(e=c.length;a<e;a++)b=c[a],f.push(b.sentence);return f}()})}};b.walk(c);return b};z=/((\s)*\/\/)|(\\)|(--)/;e=/(\S+)(\s\s\s)(?=\s*\S+)/;m=function(b){var c,a,h,l;a=b.match(z);if(null!=a)l=b.slice(0,a.index),h=a[0].length,
b=b.slice(a.index+h);else if(a=b.match(e),null!=a)l=a[1],l=b.slice(0,a.index+l.length),h=a[0].length,b=b.slice(a.index+h);else return{justification:null,rest:b,justificationErrors:null};try{c=t.parse(b)}catch(f){return{justification:null,rest:l,justificationErrors:f.message,justificationText:b}}return{justification:c,rest:l,justificationErrors:null}};D=function(b){var c,a,h,e,f,m;c=b.parent;if(b===c.content[0])return!0;if(null!=c.parent)return!1;f=c.content;m=e=!1;a=0;for(h=f.length;a<h;a++){c=f[a];
if("divider"===c.type){m=!0;break}c===b&&(e=!0)}return e&&m?!0:!1};b._isPremise=D;x=function(){return(this.justification.rule.connective+" "+(this.justification.rule.variant.intronation||"")+" "+(this.justification.rule.variant.side||"")).trim()};q=function(b){return this.findAbove(function(c){if("line"===c.type&&c.number===b)return!0})};u=function(b){return this.findAbove(function(c){if("block"===c.type&&c.number===b)return!0})};A=function(b){return this.findAbove(function(c){if(("block"===c.type||
"line"===c.type)&&c.number===b)return!0})};G=function(){var b,c,a,h,e;if(!this.justification.numbers)return[];b=[];h=this.justification.numbers;c=0;for(a=h.length;c<a;c++)e=h[c],e=this.findLine(e),!1!==e&&b.push(e);return b};B=function(){var b,c,a,h,e;if(!this.justification.numbers)return[];b=[];h=this.justification.numbers;c=0;for(a=h.length;c<a;c++)e=h[c],e=this.findBlock(e),!1!==e&&b.push(e);return b}},{"./add_line_numbers":12,"./justification_parser":18,lodash:8}],12:[function(f,y,b){var v,p,
z,e,D,w=[].indexOf||function(b){for(var e=0,f=this.length;e<f;e++)if(e in this&&this[e]===b)return e;return-1};v=f("lodash");z=/^([|\s])*\(?([0-9]\S*)([|\s]*)([\s\S]*)/;p=/\.*\)?$/;e=function(b){return b.replace(p,"")};b.cleanNumber=e;D=function(b){var f;return(f=b.content.match(z))?(b=f[2],b=e(b),{lineNumber:b,rest:f[4]}):{lineNumber:null,rest:b.content}};b.to=function(b){b.walk({usedLineNumbers:[],lineCounter:0,userNumberedLines:!1,visit:function(b){var e,f;if("block"!==b.type){this.lineCounter+=
1;f=D(b);e=f.lineNumber;f=f.rest;if(e||0===e)this.userNumberedLines=!0;null===e&&(e="line"===b.type?""+this.lineCounter:this.lineCounter+"x");if(0<=w.call(this.usedLineNumbers,e))throw Error("Duplicate line number '"+e+"' used for the second time at line "+this.lineCounter+".  Line numbers must be unique.");this.usedLineNumbers.push(e);b.number=e;b.content=f}}});b.walk({visit:function(e){var f;if("block"===e.type&&(b=e,0!==b.content.length)){e=b.content[0];for(f=v.last(b.content);"block"===f.type;)f=
v.last(f.content);null!=e.number&&null!=f.number&&(b.number=e.number+"-"+f.number)}}});return b}},{lodash:8}],13:[function(f,y,b){var v;v=f("../fol");f("../substitute");f("../util");b.to=function(b){b.walk({visit:function(b){if("line"===b.type&&null==b.sentence&&null==b.sentenceErrors){b.sentenceText=b.content;try{b.sentence=v.parse(b.sentenceText)}catch(e){b.sentenceErrors=e.message}}}});return b}},{"../fol":6,"../substitute":21,"../util":22}],14:[function(f,y,b){var v;f("../fol");f("../substitute");
f("../util");b.to=function(b){b.walk({visit:function(b){if(null!=(null!=b?b.type:void 0))switch(b.type){case "block":b.listErrorMessages=function(){throw"Not implemented yet!";};break;default:b.status=new v(b),b.getErrorMessage=function(){return b.status.getMessage()}}}});return b};v=function(){function b(f){this.line=f;this.messages=[];this.verificationAttempted=this.verified=!1;this.sentenceParsed=null!=this.line.sentence;this.justificationParsed=null!=this.line.justification;null!=this.line.sentenceErrors&&
this.addMessage("the sentence you wrote ("+this.line.sentenceText+") is not a sentence of awFOL.");null!=this.line.justificationErrors&&this.addMessage("the justification your supplied ("+this.line.justificationText+") either mentions a rule you can't use here or doesn't make sense.");"line"===this.line.type&&null==this.line.justification&&null==this.line.justificationErrors&&this.addMessage("you supplied no justification for this line.")}b.prototype.addMessage=function(b){return this.messages.push(b)};
b.prototype.clearMessages=function(){return this.messages=[]};b.prototype.popMessage=function(){return 0<this.messages.length?this.messages.pop():""};b.prototype.addAlthoughMessage=function(b){if(null!=this._addedAlthough)return this.addMessage("and although "+b);this.addMessage("although "+b);return this._addedAlthough=!0};b.prototype.getMessage=function(){var b,e,f,p,u;if(0===this.messages.length)return"";f="This line is "+((this.verified?void 0:"not correct because")||"correct but")+" "+this.messages[0];
1<this.messages.length&&(f+="And also "+this.messages[1]);2<this.messages.length&&(f+="Further, "+this.messages[2]);3<this.messages.length&&(f+="And, for another thing, "+this.messages[3]);if(4<this.messages.length)for(p=this.messages.splice(4),b=0,e=p.length;b<e;b++)u=p[b],f+="And "+u;return f};return b}()},{"../fol":6,"../substitute":21,"../util":22}],15:[function(f,y,b){var v,p,z,e,D,w,u,q,A,B,G,x,t=[].indexOf||function(b){for(var e=0,c=this.length;e<c;e++)if(e in this&&this[e]===b)return e;return-1};
v=f("lodash");q=f("./block_parser");D=f("./add_line_numbers");e=f("./add_justification");w=f("./add_sentences");u=f("./add_status");G=f("./fitch_rules").rules;z=function(b){b=q.parse(b);D.to(b);e.to(b);w.to(b);u.to(b);return b};b.to=function(b){return b.walk({visit:function(e){null!=(null!=e?e.type:void 0)&&(e.verify="block"===e.type?function(){var c;c=!0;e.walk({visit:function(a){"line"===a.type&&(a=a.verify(),c=c&&a)}});return c}:function(){return x(e,b)})}})};x=function(b,e){var c,a,h;v.isString(e)&&
(e=z(e));c=e;if(null!=b.type)h=b;else if(h=c.getLine(b),!h)throw Error("Could not find line "+b+" in "+e);h.status.verificationAttempted=!0;if("line"!==h.type)return h.status.verified=!0,h.status.addMessage("(This is a "+h.type.replace(/_/g," ")+")"),!0;if(null!=h.sentenceErrors||null!=h.justificationErrors||null==h.justification)return h.status.verified=!1;c=p(h);return!0!==c?(h.status.addMessage(c),h.status.verified=!1):a=A(h,a)};b._line=x;p=function(b){var e,c,a,h,l,f,x,n;f=b.justification.numbers;
if(!f)return!0;a=0;for(h=f.length;a<h;a++){l=f[a];c=b.findLineOrBlock(l);if(!c)return"something you cited, "+l+", cannot be cited here (either it does not exist, or it is below this line, or else it occurs above but in a closed subproof).";e=[];for(x=b.parent;x;)e.push(x),x=x.parent;if(0<=t.call(e,c))return"you cannot cite a subproof ("+l+") from within that subproof (you must close it, then cite it).";if("line"!==(n=c.type)&&"block"!==n)return"you cannot cite line "+l+" because it is a "+c.type.replace(/_/g,
" ")+".";if("line"===c.type&&!0!==c.status.sentenceParsed)return"you cannot cite line "+l+" yet because it does not contain a correct awFOL sentence.";if("block"===c.type){e=c.getFirstLine();c=c.getLastLine();if("block"===c.type)return"you cannot cite "+l+" because it finishes with an unclosed (sub)subproof (you must close it, then cite it)";if(null==e||null==c||!e.status.sentenceParsed||!c.status.sentenceParsed)return"you cannot cite subproof "+l+" yet because it contains lines that are not correct sentence of awFOL."}}return!0};
b._linesCitedAreOk=p;A=function(b,e){var c,a,h,l;c=b.justification.rule.connective;a=b.justification.rule.variant.intronation;l=b.justification.rule.variant.side;h=G[c];if(!h)return b.status.addMessage(("the rule you specified, `"+c+" "+(a||"")+" "+(l||"")+"` does not exist (or, if it does, you are not allowed to use it in this proof).").replace(/\s\s+/g,"")),b.status.verified=!1;if(!a){if("rule"===h.type)return B(h,b,e);b.status.addMessage("you only partially specified the rule: `"+c+"` needs something extra (intro? elim?).");
return b.status.verified=!1}h=h[a];if(!h)return b.status.addMessage("you specified the rule "+c+" *"+a+"* but there is no \u2018"+a+"\u2019 version of the rule for "+c+" (or, if there is, you are not allowed to use it in this proof)."),b.status.verified=!1;if(!l){if("rule"===h.type)return B(h,b,e);if(null!=h.left&&(e=B(h.left,b,e),!0===e)||null==h.right)return e;c=b.status.popMessage();e=B(h.right,b,e);!1===e&&(h=b.status.popMessage(),null!=c&&null!=h?b.status.addMessage("Either "+c+", or else "+
h+"."):b.status.addMessage(c||h||""));return e}return null==h[l]?(b.status.addMessage("you specified the rule "+c+" "+a+" *"+l+"* but there is no \u2018"+l+"\u2019 version of  "+c+" "+a+" (or, if there is, you are not allowed to use it in this proof)."),b.status.verified=!1):B(h[l],b,e)};B=function(b,e,c){return!0===b.check(e)?e.status.verified=!0:e.status.verified=!1}},{"./add_justification":11,"./add_line_numbers":12,"./add_sentences":13,"./add_status":14,"./block_parser":16,"./fitch_rules":17,
lodash:8}],16:[function(f,y,b){var v,p,z,e,D,w,u,q,A,B,G,x,t,m,r=[].indexOf||function(c){for(var a=0,b=this.length;a<b;a++)if(a in this&&this[a]===c)return a;return-1};p=f("lodash");m=f("../util");b.parse=function(c){var a,b,e,f,m,n,t,x;p.isString(c)&&(c=c.split("\n"));if(0===c.length)return new v("");u(c);c=q(c);a=c[0];x=0<=r.call(a.indentation,"|");for(b=t=new v(a.indentation);0<c.length;)if(f=c.shift(),"line"===f.type||x&&"blank_line"===f.type){for(f.indentation.length>b.indentation.length&&(b=
b.newBlock(f.indentation));b&&f.indentation.length<b.indentation.length;)b=b.close();if(!b||f.indentation.length!==b.indentation.length)throw Error("Bad indentation at line "+f.idx+" ("+f.originalText+"). (It is indented to a level to which no earlier line is indented.)");b.newLine(f)}else if("divider"===f.type)b.newLine(f);else if("blank_line"===f.type&&!x){for(a=[f];0<c.length&&"blank_line"===c[0].type;)a.push(c.shift());if(b===t)for(e=0,m=a.length;e<m;e++)f=a[e],b.newLine(f);else if(e=c[0].indentation,
e.length===b.indentation.length){e=b;n=b.close();b=0;for(m=a.length;b<m;b++)f=a[b],n.newLine(f);b=n.newBlock(e.indentation)}else if(e.length>b.indentation.length){n=0;for(m=a.length;n<m;n++)f=a[n],b.newLine(f);b=b.newBlock(e)}else{for(;b&&e.length<b.indentation.length;)b=b.close();if(!b||e.length!==b.indentation.length)throw Error("Bad indentation at line "+f.idx+" ("+f.originalText+"). (It is indented to a level to which no earlier line is indented.)");m=0;for(e=a.length;m<e;m++)f=a[m],b.newLine(f)}}for(;b!==
t;)b=b.close();return b};u=function(c){};q=function(c){var a,b,e,f,m,n,x,p,q;f=w(c);p=[];e=m=0;for(n=c.length;m<n;e=++m)x=c[e],a=t(x,f),b=a.indentation,a=a.content,q="line",A(a)&&(q="blank_line"),B(a)&&(q="divider"),p.push({indentation:b,content:a,idx:e+1,type:q,originalText:x});c=!1;e=[];m=0;for(f=p.length;m<f;m++)b=p[m],e.push(b.indentation);f=0;for(m=e.length;f<m;f++)if(b=e[f],0<=r.call(b,"|")){c=!0;break}if(c)for(e=0,c=p.length;e<c;e++)b=p[e],b.indentation=b.indentation.replace(/\s+/g,"");return p};
z=/^([|\s]+)/;w=function(c){var a,b,e,f,m;if(!c||0===c.length)return!0;b=null!=(e=c[0].match(z))?e[1]:void 0;e=0;for(f=c.length;e<f;e++)if(a=c[e],""!==a.replace(/[|-\s]/g,"")&&(m=a.match(z),a=null!=m?m[1]:void 0,null!==m&&a!==b))return!0;return!1};b.areLinesFormattedIndentationFirst=w;e=/^([|\s]*)([\s\S]*)/;D=/^([|\s]*)(\(?[0-9]+[^|\s]*)?([|\s]*)([\s\S]*)/;t=function(c,a){var b,f,m,t;if(a)return b=c.match(e),{indentation:b[1],content:b[2]};b=c.match(D);t=b[1]||"";f=b[2];m=b[3]||"";b=b[4]||"";return f?
{indentation:m,content:f+" "+b}:{indentation:t,content:""+b}};b.split=t;x=function(c){return c.replace(/[0-9]\S*/,"")};G=function(c){return c.replace(/\|/g,"")};B=function(c){c=x(c);c=G(c);return null!==c.match(/^\s*(--)/)?!0:!1};b._isDivider=B;A=function(c){c=x(c);c=G(c);return""===c.trim()};b._isBlank=A;v=function(){function c(a,c,b){this.indentation=a;this.parent=c;this.prev=b;this.type="block";this.content=[];this._depth=null==this.parent?1:this.parent._depth+1}c.prototype.getFirstLine=function(){return 0<
this.content.length?this.content[0]:null};c.prototype.getLastLine=function(){return 0<this.content.length?p.last(this.content):null};c.prototype.newLine=function(a){a.parent=this;a.prev=this.getLastLine();a.lineNumberInSource=a.idx;a.findAbove=function(a){var c;for(c=this.prev||this.parent;null!=c&&null!=c.parent;){if(a(c))return c;c=null==c.prev&&null!=c.parent?c.parent:c.prev}return!1};this.content.push(a);return a};c.prototype.newBlock=function(a){a=new c(a,this,this.getLastLine());this.content.push(a);
return a};c.prototype.close=function(){return this.parent};c.prototype.walk=function(a){var c,b,e,f,m;m=a.visit(this);if(null!=m)return m;f=this.content;b=0;for(e=f.length;b<e;b++){c=f[b];m=a.visit(c);if(null!=m)return m;"block"===c.type&&(m=c.walk(a));if(null!=m)return m}};c.prototype.getLine=function(a){var c;c=this.walk({onLine:0,visit:function(c){if("block"!==c.type&&(this.onLine+=1,this.onLine===a))return c}});if(null==c)throw Error("Could not get line number "+a);return c};c.prototype.toString=
function(){return JSON.stringify(this,function(a,c){return!c||"prev"!==a&&"parent"!==a?"sentence"===a?m.expressionToString(c):p.isFunction(c)?void 0:c:"[circular reference to "+(null!=c?c.type:void 0)+", depth "+(null!=c?c._depth:void 0)+"]"},4)};return c}();b.Block=v},{"../util":22,lodash:8}],17:[function(f,y,b){f=f("./rule");f={_description:"Rules of proof for classical first-order logic.  The rules assume that\nthere is no possible situation with an empty domain.",premise:f.premise(),reit:f.from("\u03c6").to("\u03c6"),
and:{elim:{left:f.from("\u03c6 and \u03c8").to("\u03c6"),right:f.from("\u03c6 and \u03c8").to("\u03c8")},intro:f.from("\u03c6").and("\u03c8").to("\u03c6 and \u03c8")},or:{elim:f.from("\u03c6 or \u03c8").and(f.subproof("\u03c6","\u03c7")).and(f.subproof("\u03c8","\u03c7")).to("\u03c7"),intro:{left:f.from("\u03c6").to("\u03c6 or \u03c8"),right:f.from("\u03c6").to("\u03c8 or \u03c6")}},not:{elim:f.from("not not \u03c6").to("\u03c6"),intro:f.from(f.subproof("\u03c6","contradiction")).to("not \u03c6")},
contradiction:{elim:f.from("contradiction").to("\u03c6"),intro:f.from("not \u03c6").and("\u03c6").to("contradiction")},arrow:{elim:f.from("\u03c6 arrow \u03c8").and("\u03c6").to("\u03c8"),intro:f.from(f.subproof("\u03c6","\u03c8")).to("\u03c6 arrow \u03c8")},double_arrow:{elim:{left:f.from("\u03c6\u2194\u03c8").and("\u03c6").to("\u03c8"),right:f.from("\u03c6\u2194\u03c8").and("\u03c8").to("\u03c6")},intro:f.from(f.subproof("\u03c6","\u03c8")).and(f.subproof("\u03c8","\u03c6")).to("\u03c6\u2194\u03c8")},
identity:{intro:f.to("\u03b1=\u03b1"),elim:{left:f.from("\u03b1=\u03b2").and("\u03c6").to("\u03c6[\u03b1->\u03b2]"),right:f.from("\u03b1=\u03b2").and("\u03c6").to("\u03c6[\u03b2->\u03b1]")}},existential:{elim:f.from("exists \u03c4 \u03c6").and(f.subproof("[\u03b1]\u03c6[\u03c4->\u03b1]","\u03c8")).to("\u03c8[\u03b1->null]"),intro:f.from("\u03c6[\u03c4->\u03b1]").to("exists \u03c4 \u03c6")},universal:{elim:f.from("all \u03c4 \u03c6").to("\u03c6[\u03c4->\u03b1]"),intro:{left:f.from(f.subproof("[\u03b1]",
"\u03c6[\u03c4->\u03b1]")).to("all \u03c4 \u03c6"),right:f.from(f.subproof("[\u03b1]\u03c6[\u03c4->\u03b1]","\u03c8[\u03c4->\u03b1]")).to("all \u03c4 (\u03c6 arrow \u03c8)")}}};b.rules=f},{"./rule":20}],18:[function(f,y,b){(function(v){var p=function(){function b(){this.yy={}}var e=function(a,c,b,e){b=b||{};for(e=a.length;e--;b[a[e]]=c);return b},f=[1,5],p=[1,10],u=[1,11],q=[1,12],v=[1,13],y=[1,9],G=[1,14],x=[1,15],t=[5,18],m=[5,8,14,15,16,17,19,20],r=[5,8,16,17,18],c=[5,8,14,15,18],e={trace:function(){},
yy:{},symbols_:{error:2,justification:3,j:4,EOF:5,rule_name:6,numberlist:7,connective:8,intronation:9,rule_name_option0:10,rule_name_option1:11,side:12,rule_name_group0:13,elim:14,intro:15,left:16,right:17,number:18,reit:19,premise:20,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",8:"connective",14:"elim",15:"intro",16:"left",17:"right",18:"number",19:"reit",20:"premise"},productions_:[0,[3,2],[4,1],[4,2],[4,2],[6,3],[6,3],[6,3],[6,3],[6,3],[6,3],[6,1],[9,1],[9,1],[12,1],[12,1],[7,1],[7,2],[10,0],
[10,1],[11,0],[11,1],[13,1],[13,1]],performAction:function(a,c,b,e,f,m,t){a=m.length-1;switch(f){case 1:return m[a-1];case 2:this.$={type:"justification",rule:m[a],location:t[a]};break;case 3:this.$={type:"justification",rule:m[a-1],location:t[a-1],numbers:m[a]};break;case 4:this.$={type:"justification",rule:m[a],location:t[a],numbers:m[a-1]};break;case 5:this.$={type:"rule",connective:m[a-2],variant:{type:"variant",intronation:m[a-1],side:m[a]}};break;case 6:this.$={type:"rule",connective:m[a-1],
variant:{type:"variant",intronation:m[a-2],side:m[a]}};break;case 7:this.$={type:"rule",connective:m[a-1],variant:{type:"variant",intronation:m[a],side:m[a-2]}};break;case 8:this.$={type:"rule",connective:m[a-2],variant:{type:"variant",intronation:m[a],side:m[a-1]}};break;case 9:this.$={type:"rule",connective:m[a],variant:{type:"variant",intronation:m[a-1],side:m[a-2]}};break;case 10:this.$={type:"rule",connective:m[a],variant:{type:"variant",intronation:m[a-2],side:m[a-1]}};break;case 11:this.$=
{type:"rule",connective:m[a],variant:{type:"variant",intronation:null,side:null}};break;case 12:this.$="elim";break;case 13:this.$="intro";break;case 14:this.$="left";break;case 15:this.$="right";break;case 16:this.$=[m[a]];break;case 17:this.$=[m[a-1]].concat(m[a])}},table:[{3:1,4:2,6:3,7:4,8:f,9:6,12:7,13:8,14:p,15:u,16:q,17:v,18:y,19:G,20:x},{1:[3]},{5:[1,16]},{5:[2,2],7:17,18:y},{6:18,8:f,9:6,12:7,13:8,14:p,15:u,16:q,17:v,19:G,20:x},{9:19,12:20,14:p,15:u,16:q,17:v},{8:[1,21],12:22,16:q,17:v},
{8:[1,23],9:24,14:p,15:u},e(t,[2,11]),e(m,[2,16],{7:25,18:y}),e(r,[2,12]),e(r,[2,13]),e(c,[2,14]),e(c,[2,15]),e(t,[2,22]),e(t,[2,23]),{1:[2,1]},{5:[2,3]},{5:[2,4]},e(t,[2,18],{10:26,12:27,16:q,17:v}),{9:28,14:p,15:u},e(t,[2,20],{11:29,12:30,16:q,17:v}),{8:[1,31]},{9:32,14:p,15:u},{8:[1,33]},e(m,[2,17]),e(t,[2,5]),e(t,[2,19]),e(t,[2,8]),e(t,[2,6]),e(t,[2,21]),e(t,[2,10]),e(t,[2,7]),e(t,[2,9])],defaultActions:{16:[2,1],17:[2,3],18:[2,4]},parseError:function(a,c){if(c.recoverable)this.trace(a);else{var b=
function(a,c){this.message=a;this.hash=c};b.prototype=Error;throw new b(a,c);}},parse:function(a){var c=[0],b=[null],e=[],f=this.table,m="",t=0,r=0,x=0,p=e.slice.call(arguments,1),q=Object.create(this.lexer),u={},v;for(v in this.yy)Object.prototype.hasOwnProperty.call(this.yy,v)&&(u[v]=this.yy[v]);q.setInput(a,u);u.lexer=q;u.parser=this;"undefined"==typeof q.yylloc&&(q.yylloc={});v=q.yylloc;e.push(v);var y=q.options&&q.options.ranges;this.parseError="function"===typeof u.parseError?u.parseError:Object.getPrototypeOf(this).parseError;
for(var w,A,B,z,G={},D,Y;;){B=c[c.length-1];if(this.defaultActions[B])z=this.defaultActions[B];else{if(null===w||"undefined"==typeof w)w=void 0,w=q.lex()||1,"number"!==typeof w&&(w=this.symbols_[w]||w);z=f[B]&&f[B][w]}if("undefined"===typeof z||!z.length||!z[0]){var ob="";Y=[];for(D in f[B])this.terminals_[D]&&2<D&&Y.push("'"+this.terminals_[D]+"'");ob=q.showPosition?"Parse error on line "+(t+1)+":\n"+q.showPosition()+"\nExpecting "+Y.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+
(t+1)+": Unexpected "+(1==w?"end of input":"'"+(this.terminals_[w]||w)+"'");this.parseError(ob,{text:q.match,token:this.terminals_[w]||w,line:q.yylineno,loc:v,expected:Y})}if(z[0]instanceof Array&&1<z.length)throw Error("Parse Error: multiple actions possible at state: "+B+", token: "+w);switch(z[0]){case 1:c.push(w);b.push(q.yytext);e.push(q.yylloc);c.push(z[1]);w=null;A?(w=A,A=null):(r=q.yyleng,m=q.yytext,t=q.yylineno,v=q.yylloc,0<x&&x--);break;case 2:Y=this.productions_[z[1]][1];G.$=b[b.length-
Y];G._$={first_line:e[e.length-(Y||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(Y||1)].first_column,last_column:e[e.length-1].last_column};y&&(G._$.range=[e[e.length-(Y||1)].range[0],e[e.length-1].range[1]]);B=this.performAction.apply(G,[m,r,t,u,z[1],b,e].concat(p));if("undefined"!==typeof B)return B;Y&&(c=c.slice(0,-2*Y),b=b.slice(0,-1*Y),e=e.slice(0,-1*Y));c.push(this.productions_[z[1]][0]);b.push(G.$);e.push(G._$);z=f[c[c.length-2]][c[c.length-1]];c.push(z);break;case 3:return!0}}}},
f=function(){return{EOF:1,parseError:function(a,c){if(this.yy.parser)this.yy.parser.parseError(a,c);else throw Error(a);},setInput:function(a,c){this.yy=c||this.yy||{};this._input=a;this._more=this._backtrack=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var a=this._input[0];
this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var c=a.length,b=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-c);this.offset-=c;a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=
this.matched.substr(0,this.matched.length-1);b.length-1&&(this.yylineno-=b.length-1);var e=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:b?(b.length===a.length?this.yylloc.first_column:0)+a[a.length-b.length].length-b[0].length:this.yylloc.first_column-c};this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-c]);this.yyleng=this.yytext.length;return this},more:function(){this._more=!0;return this},
reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?
"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),c=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+c+"^"},test_match:function(a,c){var b,e;this.options.backtrack_lexer&&(e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,
last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(e.yylloc.range=this.yylloc.range.slice(0)));if(b=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=b.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:b?
b[b.length-1].length-b[b.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._backtrack=this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];b=this.performAction.call(this,this.yy,this,c,this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(b)return b;
if(this._backtrack)for(var f in e)this[f]=e[f];return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,c,b;this._more||(this.match=this.yytext="");for(var e=this._currentRules(),f=0;f<e.length;f++)if((c=this._input.match(this.rules[e[f]]))&&(!a||c[0].length>a[0].length))if(a=c,b=f,this.options.backtrack_lexer){a=this.test_match(c,e[f]);if(!1!==a)return a;if(this._backtrack)a=!1;else return!1}else if(!this.options.flex)break;return a?(a=this.test_match(a,e[b]),!1!==
a?a:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?
this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){a=this.conditionStack.length-1-Math.abs(a||0);return 0<=a?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(a,c,b,e){switch(b){case 0:return c.yytext=a.lexer.matches[1],18;case 1:return c.yytext=a.lexer.matches[1]+"-"+a.lexer.matches[2],
18;case 2:return c.yytext=a.lexer.matches[1]+"-"+a.lexer.matches[2],18;case 3:return c.yytext=a.lexer.matches[1],18;case 4:return 14;case 5:return 15;case 6:return c.yytext="contradiction",8;case 7:return c.yytext="or",8;case 8:return c.yytext="identity",8;case 9:return c.yytext="and",8;case 10:return c.yytext="double_arrow",8;case 11:return c.yytext="arrow",8;case 12:return c.yytext="not",8;case 13:return c.yytext="reit",19;case 14:return c.yytext="premise",20;case 15:return c.yytext="universal",
8;case 16:return c.yytext="existential",8;case 17:return 16;case 18:return 17;case 20:return 5;case 23:console.log(c.yytext)}},rules:[/^(?:([0-9][^,\s]*)(\s+and\s+)(?=[0-9]))/i,/^(?:([0-9][^,\s]*)\s+to\s+([0-9][^,\s]*))/i,/^(?:([0-9][^,\s]*?)\s*(?:-+)\s*([0-9][^,\s]*))/i,/^(?:([0-9][^,\s]*)(?:(\s*,)*))/i,/^(?:elimination|eliminate|elim)/i,/^(?:introduction|introduce|intro)/i,/^(?:\u22a5|_\|_|contradiction|contra|false)/i,/^(?:or|\u2228|\+|\u01c0\u01c0|\|)/i,/^(?:=|identity)/i,/^(?:and|conjunction|\u2227|\u2022)/i,
/^(?:double_arrow|\u2194|\u2261|\u21d4|<->)/i,/^(?:arrow|->|\u21d2|\u2192|\u2283)/i,/^(?:not|\u00ac|\u02dc|!|negation)/i,/^(?:reit|reiteration)/i,/^(?:premise|assumption)/i,/^(?:all|\u2200|every|universal)/i,/^(?:some|exists|\u2203|existential)/i,/^(?:left)/i,/^(?:right)/i,/^(?:[\s,]+)/i,/^(?:$)/i,/^(?:\w+)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],inclusive:!0}}}}();e.lexer=f;b.prototype=e;e.Parser=b;return new b}();"undefined"!==
typeof f&&"undefined"!==typeof b&&(b.parser=p,b.Parser=p.Parser,b.parse=function(){return p.parse.apply(p,arguments)},b.main=function(p){p[1]||(console.log("Usage: "+p[0]+" FILE"),v.exit(1));p=f("fs").readFileSync(f("path").normalize(p[1]),"utf8");return b.parser.parse(p)},"undefined"!==typeof y&&f.main===y&&b.main(v.argv.slice(1)))}).call(this,f("_process"))},{_process:3,fs:1,path:2}],19:[function(f,y,b){var v,p,z,e,D,w;w=f("./block_parser");p=f("./add_line_numbers");v=f("./add_justification");z=
f("./add_sentences");e=f("./add_status");D=f("./add_verification");b.parse=function(b){var f,y;try{f=w.parse(b),p.to(f),v.to(f),z.to(f),e.to(f),D.to(f)}catch(B){return B.message}y=f;y.listErrorMessages=function(){var b;b=[];y.walk({visit:function(e){var f;if("line"===(null!=e?e.type:void 0)&&!1===e.status.verified)return f=e.number,e=e.status.getMessage(),b.push(f+": "+e)}});return b.join("\n")};return y}},{"./add_justification":11,"./add_line_numbers":12,"./add_sentences":13,"./add_status":14,"./add_verification":15,
"./block_parser":16}],20:[function(f,y,b){var v,p,z,e,D,w,u,q,A,B,G=[].indexOf||function(b){for(var e=0,f=this.length;e<f;e++)if(e in this&&this[e]===b)return e;return-1};e=f("lodash");f("../util");q=f("../fol");D=function(){function b(e){e=w(e);this._requirements={from:(e?[e]:void 0)||[],to:void 0}}b.prototype.type="rule";b.prototype.and=function(b){b=w(b);this._requirements.from.push(b);return this};b.prototype.to=function(b){if(this._requirements.to)throw Error("You cannot specify `.to` more than once in a single rule.");
b=w(b);this._requirements.to=b;return this};b.prototype.check=function(b){return(new v(b,this._requirements)).check()};return b}();A=function(b){return new D(b)};b.from=A;b.to=function(b){return A().to(b)};b.subproof=function(b,f){b=w(b);f=w(f);return{type:"subproof",startReq:b,endReq:f,listMetaVariableNames:function(){var b;b=this.startReq.listMetaVariableNames();return b=e.defaults(b,this.endReq.listMetaVariableNames())},toString:function(){return b.toString()+" \u22a2 "+f.toString()}}};b.premise=
function(){var b,e;e=A();b=e.check.bind(e);e.check=function(e){var f;f=b(e);return!0!==f?f:e.prev?null!=e.parent.parent?(e.status.addMessage("only the first line of a subproof may be a premise."),!1):e.findAbove(function(c){var a,b;if("line"===c.type){if(b="premise"===(null!=(a=c.justification)?a.rule.connective:void 0))return!1;if(!b)return!0}return"block"===c.type?!0:!1})?(e.status.addMessage("premises may not occur after non-premises."),!1):!0:!0};return e};b._notImplementedYet=function(b){throw Error("the rule `"+
b.justification.rule.connective+"` (or some part of it) is not implemented yet!");};w=function(b){if(!b||"subproof"===b.type)return b;e.isString(b)&&(b=q.parse(b));q._decorate(b);return b};u=function(b){var f,m,r,c,a,h,l,p;if(0===b.length)return[[]];p=[];m=c=0;for(a=b.length-1;0<=a?c<=a:c>=a;m=0<=a?++c:--c)for(f=e.clone(b),m=f.splice(m,1),l=u(f),r=f=0,h=l.length-1;0<=h?f<=h:f>=h;r=0<=h?++f:--f)r=m.concat(l[r]),p.push(r);return p};b._permutations=u;v=function(){function b(e,f){this.line=e;this.requirements=
f;this.citedLines=this.line.getCitedLines();this.citedBlocks=this.line.getCitedBlocks();this.ruleName=this.line.getRuleName();this.matches=null}b.prototype.check=function(){var b,e,f,c,a;if(!this.citedTypesAreCorrect())return this;a=[];this.requirements.to&&a.push(new z(this.requirements.to,[this.line]));c=this.requirements.from;e=0;for(f=c.length;e<f;e++)b=c[e],null!=(null!=b?b.type:void 0)&&"subproof"===b.type?a.push(new z(b,this.citedBlocks)):a.push(new z(b,this.citedLines));a.reverse();b=u(a);
for(e=!1;!e&&0<b.length;)e=b.shift(),e=new p(e,this.line),e=e.find();return e?!0:this};b.prototype.citedTypesAreCorrect=function(){var b,e,f,c,a;f=this.whatToCite();b=this.citedLines.length;e=this.citedBlocks.length;if(f.lines===b&&f.subproofs===e)return!0;a=B(f.lines,"line");c=B(f.subproofs,"subproof");f=(a&&c?"and ":void 0)||(a||c?void 0:"nothing")||"";b=B(b,"line");e=B(e,"subproof");this.line.status.addMessage(("you must cite "+a+" "+f+c+" when using the rule "+this.ruleName+" (you cited "+b+" "+
((b&&e?"and ":void 0)||(b||e?void 0:"nothing")||"")+e+").").replace(/\s\s+/g," "));return!1};b.prototype.whatToCite=function(){var b,e,f,c,a;a={lines:0,subproofs:0};c=this.requirements.from;b=0;for(e=c.length;b<e;b++)f=c[b],"subproof"===f.type?a.subproofs+=1:a.lines+=1;return a};return b}();z=function(){function b(e,f,r){this.theRequirement=e;this.candidateLinesOrSubproofs=f;this.matches=null!=r?r:{};this.saveMatches(this.matches);this.metaVariableNames=this.theRequirement.listMetaVariableNames()}
b.prototype.setMatches=function(b){this.matches=b;return this.saveMatches(this.matches)};b.prototype._matchesStack=[];b.prototype.saveMatches=function(){var b;b=e.cloneDeep(this.matches);this._matchesStack.push(b);this.matches=b};b.prototype.restoreMatches=function(){var b;this._matchesStack.pop();b=this._matchesStack;this.matches=b[b.length-1]};b.prototype.tempRemovedCandidates={};b.prototype.temporarilyRemoveCandidate=function(b){var e,f;e=function(){var c,a,e,l;e=this.candidateLinesOrSubproofs;
l=[];c=0;for(a=e.length;c<a;c++)f=e[c],f.number===b&&l.push(f);return l}.call(this);if(1===e.length)return this.tempRemovedCandidates[b]=e[0],this.candidateLinesOrSubproofs=function(){var c,a,e,l;e=this.candidateLinesOrSubproofs;l=[];c=0;for(a=e.length;c<a;c++)f=e[c],f.number!==b&&l.push(f);return l}.call(this)};b.prototype.restoreCandidate=function(b){if(b in this.tempRemovedCandidates)return this.candidateLinesOrSubproofs.push(this.tempRemovedCandidates[b]),delete this.tempRemovedCandidates[b]};
b.prototype.canCheckAlready=function(){var b,e,f,c;f=this.metaVariableNames.inSub.left;b=0;for(e=f.length;b<e;b++)if(c=f[b],!(c in this.matches))return!1;return!0};b.prototype.check=function(){var b,e,f,c,a,h;h=!1;a=this.candidateLinesOrSubproofs;e=0;for(f=a.length;e<f;e++)b=a[e],c=this._checkOne(b),!1!==c&&(h=h||{},h[b.number]=c);return h};b.prototype._checkOne=function(b){var e;if(null!=this.theRequirement.type&&"subproof"===this.theRequirement.type){if("block"!==b.type)return!1;e=this._checkOneLine(this.theRequirement.startReq,
b.getFirstLine(),this.matches);return!1===e?!1:b=this._checkOneLine(this.theRequirement.endReq,b.getLastLine(),e)}return"block"===b.type?!1:e=this._checkOneLine(this.theRequirement,b,this.matches)};b.prototype._checkOneLine=function(b,e,f){var c,a;b=b.clone().applyMatches(f);if(null===b.applySubstitutions())return!1;c=e.sentence;if(null==c)return!1;null==b.box&&null!=c.box&&(c=c.clone(),delete c.box);f=c.findMatches(b,f);if(!1===f)return f;if(null!=b.box||"box"===b.type)b=("box"===b.type?b:void 0)||
(null!=b.box?b.box:void 0),b=b.applyMatches(f).applySubstitutions(),a=b.term.name,b=function(c){return"line"!==c.type?!1:0<=G.call(c.sentence.getNames(),a)?!0:!1},(e=e.findAbove(b))&&(f=!1);return f};return b}();p=function(){function b(e,f,p){this.line=f;this.matches=null!=p?p:{};var c,a;a=[];p=0;for(c=e.length;p<c;p++)f=e[p],a.push(f);this.reqCheckList=a;this.line.status.clearMessages()}b.prototype.find=function(){var e,f,p,c,a,h,l;if(0===this.reqCheckList.length)return!0;a=this.reqCheckList.pop();
a.setMatches(this.matches);for(h=0;!a.canCheckAlready()&&h<this.reqCheckList.length+1;)this.reqCheckList.unshift(a),a=this.reqCheckList.pop(),a.setMatches(this.matches),h+=1;if(h===this.reqCheckList.length+1)throw Error("Rule problem!  I can\u2019t start checking any of the conditions in the rule.");h=a.check();if(!1===h)return this.writeMessage(a),!1;for(c in h){e=h[c];l=this.reqCheckList;f=0;for(p=l.length;f<p;f++)a=l[f],a.temporarilyRemoveCandidate(c);a=new b(this.reqCheckList,this.line,e);l=a.find();
p=this.reqCheckList;f=0;for(e=p.length;f<e;f++)a=p[f],a.restoreCandidate(c);if(!0===l)return!0}return!1};b.prototype.writeMessage=function(b){var e;if(this.line.number===(null!=(e=b.candidateLinesOrSubproofs[0])?e.number:void 0))return this.line.status.addMessage("You can only use "+this.line.getRuleName()+" on a line with the form \u2018"+b.theRequirement.toString()+"\u2019.");e=b.theRequirement.type;"subproof"!==e&&(e="line");return this.line.status.addMessage("to apply "+this.line.getRuleName()+
" you need to cite a "+e+" with the form \u2018"+b.theRequirement.toString()+"\u2019.")};return b}();B=function(b,e){if(0===b)return"";if(1===b)return"1 "+e;if(1<b)return b+" "+e+"s"};b.RequirementChecker=z;b.Pathfinder=p;b.LineChecker=v},{"../fol":6,"../util":22,lodash:8}],21:[function(f,y,b){var v,p,z,e,D,w,u,q,A;v=f("lodash");A=f("./util");y=f("./parser/awFOL");D=f("./match");p={replace_arrow:{from:"\u03c6 arrow \u03c8",to:"(not \u03c6) or \u03c8"},replace_double_arrow:{from:"\u03c6 \u2194 \u03c8",
to:"(\u03c6 or (not \u03c8)) and ((not \u03c6) or \u03c8)"},demorgan1:{from:"not (\u03c6 and \u03c8)",to:"((not \u03c6) or (not \u03c8))"},demorgan2:{from:"not (\u03c6 or \u03c8)",to:"((not \u03c6) and (not \u03c8))"},dbl_neg:{from:"not not \u03c6",to:"\u03c6"},not_all:{from:"not ((all \u03c4) \u03c6)",to:"(exists \u03c4) (not \u03c6)"},not_exists:{from:"not ((exists \u03c4) \u03c6)",to:"(all \u03c4) (not \u03c6)"},cnf_left:{from:"\u03c61 or (\u03c62 and \u03c63)",to:"(\u03c61 or \u03c62) and (\u03c61 or \u03c63)"},
cnf_right:{from:"(\u03c62 and \u03c63) or \u03c61",to:"(\u03c62 or \u03c61) and (\u03c63 or \u03c61)"},all_and_left:{from:"\u03c6 and ((all \u03c4) \u03c8)",to:"(all \u03c4) (\u03c6 and \u03c8)"},all_and_right:{from:"((all \u03c4) \u03c8) and \u03c6",to:"(all \u03c4) (\u03c8 and \u03c6)"},all_or_left:{from:"\u03c6 or ((all \u03c4) \u03c8)",to:"(all \u03c4) (\u03c6 or \u03c8)"},all_or_right:{from:"((all \u03c4) \u03c8) or \u03c6",to:"(all \u03c4) (\u03c8 or \u03c6)"},exists_and_left:{from:"\u03c6 and ((exists \u03c4) \u03c8)",
to:"(exists \u03c4) (\u03c6 and \u03c8)"},exists_and_right:{from:"((exists \u03c4) \u03c8) and \u03c6",to:"(exists \u03c4) (\u03c8 and \u03c6)"},exists_or_left:{from:"\u03c6 or ((exists \u03c4) \u03c8)",to:"(exists \u03c4) (\u03c6 or \u03c8)"},exists_or_right:{from:"((exists \u03c4) \u03c8) or \u03c6",to:"(exists \u03c4) (\u03c8 or \u03c6)"}};u={};for(e in p)q=p[e],f=y.parse(q.from),A.delExtraneousProperties(f),q=y.parse(q.to),A.delExtraneousProperties(q),f={from:f,to:q},u[e]=f;b.subsForPNF=u;p={identity:{from:"\u03c4=\u03c4",
to:"true"},not_true:{from:"not true",to:"false"},not_false:{from:"not false",to:"true"},or_duplicate:{from:"\u03c6 or \u03c6",to:"\u03c6"},or_duplicate_left:{from:"\u03c6 or (\u03c6 or \u03c8)",to:"\u03c6 or \u03c8"},or_duplicate_right:{from:"(\u03c8 or \u03c6) or \u03c6",to:"\u03c8 or \u03c6"},and_duplicate:{from:"\u03c6 and \u03c6",to:"\u03c6"},and_duplicate_left:{from:"\u03c6 and (\u03c6 and \u03c8)",to:"\u03c6 and \u03c8"},and_duplicate_right:{from:"(\u03c8 and \u03c6) and \u03c6",to:"\u03c8 and \u03c6"},
false_or:{from:"false or \u03c6",to:"\u03c6"},true_or:{from:"true or \u03c6",to:"true"},false_and:{from:"false and \u03c6",to:"false"},true_and:{from:"true and \u03c6",to:"\u03c6"},contradiction_and:{from:"\u03c6 and not \u03c6",to:"false"},contradiction_and_left:{from:"\u03c6 and (not \u03c6 and \u03c8)",to:"false"},contradiction_and_right:{from:"(\u03c8 and \u03c6) and not \u03c6",to:"false"},taut_or:{from:"\u03c6 or not \u03c6",to:"true"},taut_and_left:{from:"\u03c6 or (not \u03c6 or \u03c8)",
to:"true"},taut_and_right:{from:"(\u03c8 or \u03c6) or not \u03c6",to:"true"}};u={};for(e in p)q=p[e],f=y.parse(q.from),A.delExtraneousProperties(f),q=y.parse(q.to),A.delExtraneousProperties(q),f={from:f,to:q},u[e]=f;b.subs_eliminate_redundancy=u;z=function(b,e){var f;return(f=D.findWithoutApplyingSubs(b,e.from))?D.apply(e.to,f):b};b.doSub=z;b.doSubRecursive=function(b,e,f){null==f&&(f={});return A.walkMutate(b,function(b){return null===b||v.isArray(b)||null!=b.type&&"box"===b.type?b:z(b,e)})};w=
function(b,e,f){var p,m,q;null==f&&(f={});p=e.from;m=e.to;q=function(c){if(null===c||v.isArray(c)||q._inSub)return c;if(A.areIdenticalExpressions(c,p)){if(null===m)throw Error("_internal: replace to null");return A.cloneExpression(m)}return c};b=f.noClone?b:A.cloneExpression(b);return A.walkMutate(b,q)};b.replace=w;b.applySubstitutions=function(b){var e;e=function(b){var e,f,p,c;if(null==(null!=b?b.substitutions:void 0))return b;c=v.cloneDeep(b.substitutions);delete b.substitutions;e=0;for(f=c.length;e<
f;e++)p=c[e],p={from:p.from,to:p.to},b=w(b,p);return b};b=v.cloneDeep(b);try{return A.walkMutate(b,e)}catch(f){b=f;if("_internal: replace to null"===b.message)return null;throw b;}}},{"./match":7,"./parser/awFOL":10,"./util":22,lodash:8}],22:[function(f,y,b){var v,p,z,e,D,w,u,q,A,B,G,x,t,m,r={}.hasOwnProperty;p=f("lodash");m=function(b,a,e){var f;if(p.isArray(b)){var q,r,n;n=[];q=0;for(r=b.length;q<r;q++)f=b[q],n.push(m(f,a,e));return n}if(null===b)return a(b);null!=(null!=e?e.topDown:void 0)&&e.topDown&&
(f=a(b));a._trace&&console.log("walkMutate got "+util.expressionToString(b));null!=b.box&&(a._inBox=!0,b.box=m(b.box,a,e),a._inBox=void 0);null!=b.substitutions&&(null==a._inSubCount&&(a._inSubCount=0),a._inSubCount+=1,a._inSub=!0,b.substitutions=m(b.substitutions,a,e),--a._inSubCount,0===a._inSubCount&&(a._inSub=void 0));"substitution"===b.type&&(a._inSubLeft=!0,b.from=m(b.from,a,e),a._inSubLeft=void 0,b.to=m(b.to,a,e));null!=b.boundVariable&&(a._inBoundVariable=!0,b.boundVariable=m(b.boundVariable,
a,e),a._inBoundVariable=void 0);null!=b.termlist&&(b.termlist=m(b.termlist,a,e));null!=b.term&&(b.term=m(b.term,a,e));null!=b.left&&(b.left=m(b.left,a,e));null!=b.right&&(b.right=m(b.right,a,e));return null!=(null!=e?e.topDown:void 0)&&e.topDown?f:a(b)};b.walkMutate=m;x=function(b,a,e){var f;f=function(b){var c,e;for(c in f)r.call(f,c)&&(e=f[c],a[c]=e);a(b);return b};return m(b,f,e)};b.walk=x;t=function(b,a,e,f){var m,q,n;if(e&&(f=e(b,a),void 0!==f))return f;if(null===b||null===a)return b===a;q=[p.isBoolean,
p.isNumber,p.isString];f=0;for(m=q.length;f<m;f++)if(n=q[f],n(b)||n(a))return b===a;if(p.isArray(b)||p.isArray(a)){if(!p.isArray(b)||!p.isArray(a)||b.length!==a.length)return!1;m=q=0;for(n=b.length;q<n;m=++q)if(f=b[m],!t(f,a[m],e))return!1;return!0}n="substitutions from to box term boundVariable termlist left right type name letter value".split(" ");m=0;for(q=n.length;m<q;m++)if(f=n[m],(f in b||f in a)&&!(f in b&&f in a&&t(b[f],a[f],e)))return!1;return!0};b.walkCompare=t;D=function(b,a,e){return t(b,
a,void 0,e)};b.areIdenticalExpressions=D;A=function(b,a){var e,f,m,q;e=a(b);if(void 0!==e)return e;if(null!==b){m=[p.isBoolean,p.isNumber,p.isString];e=0;for(f=m.length;e<f;e++)if(q=m[e],q(b))return;if(p.isArray(b))for(f=0,m=b.length;f<m;f++){if(e=b[f],e=A(e,a),void 0!==e)return e}else for(q="substitutions from to box term boundVariable termlist left right type name letter value".split(" "),f=0,m=q.length;f<m;f++)if(e=q[f],e in b&&(e=A(b[e],a),void 0!==e))return e}};b.find=A;b.walkMutateFindOne=function(b,
a,e){var f,p;f=void 0;p=function(b){var c,e;if(void 0!==f)return b;for(c in p)r.call(p,c)&&(e=p[c],a[c]=e);e=a(b)||{};c=e.newExpression;f=e.aResult;return void 0!==c?c:b};b=m(b,p,e);return{theResult:f,mutatedExpression:b}};z=function(b){var a,e,f,m;if(null===b)return b;m=["location","symbol","parent"];e=0;for(f=m.length;e<f;e++)a=m[e],a in b&&delete b[a];for(a in b)r.call(b,a)&&(e=b[a],p.isFunction(e)&&delete b[a]);return b};b.delExtraneousProperties=function(b){return null==(null!=b?b.type:void 0)?
b:x(b,z)};u=function(b){var a,e,f,m,q;if(null===b)return null;f=[p.isBoolean,p.isNumber,p.isString];a=0;for(e=f.length;a<e;a++)if(m=f[a],m(b))return b;if(p.isArray(b)){m=[];e=0;for(f=b.length;e<f;e++)a=b[e],m.push(u(a));return m}a={};q="substitutions from to box term boundVariable termlist left right type name letter value".split(" ");f=0;for(m=q.length;f<m;f++)e=q[f],e in b&&(a[e]=u(b[e]));return a};b.cloneExpression=u;v={not:"\u00ac","false":"\u22a5",identity:"=",and:"\u2227",arrow:"\u2192",double_arrow:"\u2194",
or:"\u2228",nor:"\u2193",nand:"\u2191",universal_quantifier:"\u2200",existential_quantifier:"\u2203"};b.SYMBOLS=v;q=function(b,a){var e,f,q,r,n,t;null==a&&(a={});null==a.symbols&&(a.symbols=v);r=[p.isBoolean,p.isNumber,p.isString,p.isArray];e=0;for(f=r.length;e<f;e++)if(t=r[e],t(b))return""+b;n=0;e=a.replaceSymbols?u(b):p.cloneDeep(b);f=m(e,function(b){var c,e,f,h,l,m,q,r;if(null===b)return"null";n+=1;m=[p.isBoolean,p.isNumber,p.isString];e=0;for(h=m.length;e<h;e++)if(t=m[e],t(b))return""+b;if(p.isArray(b))return b.join(",");
if(null==(null!=b?b.type:void 0)&&void 0===b)return"[undefined]";if("variable"===(q=null!=b?b.type:void 0)||"name"===q||"term_metavariable"===q)return b.substitutions?"{"+b.name+"["+b.substitutions+"]}":b.name;if("box"===b.type)return"["+b.term+"]";if("termlist"===b.type){f=[];r=0;for(l=b.length;r<l;r++)c=b[r],f.push(c.name);return f}if("substitution"===b.type)return b.from+"->"+b.to;null!=b.box&&(c=b.box);b.substitutions&&(r="["+b.substitutions+"]");null!=b.termlist&&(e=b.name||b.symbol||a.symbols[b.type]||
b.type,l=e+"("+b.termlist.join(",")+")");"identity"===b.type&&(e=b.symbol||"=",h=b.termlist,l=h[0],h=h[1],l=l+" "+e+" "+h);if("sentence_letter"===(f=b.type)||"expression_variable"===f)l=b.letter;"value"===b.type&&(l=""+((null!=b.symbol?b.symbol:void 0)||("false"===b.value||!1===b.value?"\u22a5":void 0)||b.value));e=null!=b.right;h=f=" ";e&&(f=" (",h=" )");e=b.symbol||a.symbols[b.type]||b.type||"";a.wrapWithDivs&&(e="<span class='_symbolWrap' data-symbolNum='"+n+"'>"+e+"</span>");null!=b.boundVariable&&
(l=b.boundVariable,l=e+" "+l+" "+f+b.left+(b.right||"")+h);null!=b.left&&null==b.boundVariable&&(l=null==b.right?""+f+e+" "+(b.left||"")+h:""+f+(b.left||"")+" "+e+" "+(b.right||"")+h);a.wrapWithDivs&&(l="<span class='_expressionWrap'>"+l+"</span>");return""+(c||"")+l+(r||"")});e={remove_extra_whitespace:{from:/\s+/g,to:" "},remove_quantifier_space:{from:/([\u2200\u2203])\s+/g,to:"$1"},remove_outer_brackets:{from:/(^\s*\()([\s\S]*)(\)\s*$)/,to:"$2"}};for(q in e)r=e[q],f=f.replace(r.from,r.to);return f.trim()};
b.expressionToString=q;b.matchesToString=function(b){var a,e,f;if(!1===b)return"false";if(!b)return"[no]";a="";for(e in b)r.call(b,e)&&(f=b[e],null!=(null!=f?f.type:void 0)&&(a=a+"\n\t"+e+" : "+q(f)));return a};b.exhaust=function(b,a,e){var f;null==e&&(e=D);for(f=null;!e(f,b);)f=b,b=a(u(f));return b};b.listOfAtomicExpressionsComparator=function(b,a){var e,f,m,p;if(b.length<a.length)return-1;if(b.length>a.length)return 1;f=e=0;for(p=b.length;e<p;f=++e)if(m=b[f],f=w(m,a[f]),0!==f)return f;return 0};
w=function(b,a){var f,l;f=e(b.type,a.type);if(0!==f)return f;if("not"===b.type&&"not"!==a.type)return f=w(b.left,a),0===f?1:f;if("not"!==b.type&&"not"===a.type)return f=w(b,a.left),0===f?-1:f;if("not"===b.type&&"not"===a.type)return w(b.left,a.left);if(null!=b.value)return b.value<a.value?-1:b.value>a.value?1:0;if(null!=b.letter)return b.letter<a.letter?-1:b.letter>a.letter?1:0;if(null!=b.name)return b.name<a.name?-1:b.name>a.name?1:0;if(null!=b.termlist)return f=B(b.termlist[0],b.termlist[1],G),
l=B(a.termlist[0],a.termlist[1],G),G(f,l);throw Error("Could not do a comparison for "+JSON.stringify(b,null,4));};b.atomicExpressionComparator=w;B=function(b,a,e){return 0<e(b,a)?a:b};G=function(b,a){var f;f=e(b.type,a.type);return 0!==f?f:b.name<a.name?-1:b.name>a.name?1:0};b.termComparator=G;e=function(b,a){var e;if("not"===b||"not"===a)return 0;e={value:5,sentence_letter:10,predicate:20,identity:30,name:50,variable:60};return e[b]<e[a]?-1:e[b]>e[a]?1:0};b.listTerms=function(b){var a;a=[];x(b,
function(b){var c;if("variable"===(c=b.type)||"name"===c||"term_metavariable"===c)return a.push(b)});return a};b.listMetaVariableNames=function(b){var a,e;a={inExpression:[],inBox:[],inSub:{left:[],right:[]}};e=function(b){var c;if(null==(null!=b?b.type:void 0)||"term_metavariable"!==b.type&&"expression_variable"!==b.type)return b;c=(null!=(null!=b?b.letter:void 0)?b.letter:void 0)||b.name;null!=e._inSub?null!=e._inSubLeft?a.inSub.left.push(c):a.inSub.right.push(c):null!=e._inBox?a.inBox.push(c):
a.inExpression.push(c);return b};x(b,e);return a};b.expressionTypes="existential_quantifier universal_quantifier and or nand nor arrow double_arrow not value predicate identity expression_variable sentence_letter".split(" ");b.termTypes=["name","variable","term_metavariable"];b.atomicSentenceTypes=["sentence_letter","expression_variable","identity","predicate"];b.expressionContainsSubstitutions=function(b){return!0===A(b,function(a){if(null!=(null!=a?a.substitutions:void 0))return!0})?!0:!1};b.expressionHasSub=
function(b,a){var e,f,m,p;if(null==(null!=b?b.substitutions:void 0))return!1;p=b.substitutions;f=0;for(m=p.length;f<m;f++)if(e=p[f],D(e.from,a.from)&&D(e.to,a.to))return!0;return!1}},{lodash:8}]},{},[4]);
